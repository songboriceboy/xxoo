<!DOCTYPE html>

<html lang="zh">
    <head>
        <meta charset="utf-8">
        <meta name="description" content="android,ios" />
        <meta name="keywords" content="android,ios" />

        <title>叶小钗</title>
        <style type='text/css'>
            body {
                background-color: #CCC;
            }
        </style>
        <link rel="stylesheet" href="../../../css/bootstrap.css" />
    </head>

    <body>
        <div class="container">

            <h1>叶小钗</h1>

            <div class='navbar navbar-inverse'>
                <div class='navbar-inner nav-collapse' style="height: auto;">
                    <ul class="nav">
                              				<li><a href="http://songboriceboy.github.io/xxoo/html/blade/index.html">blade</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/css/index.html">css</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/HTML5&CSS3/index.html">HTML5&CSS3</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/index.html">javascript</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Javaxx/index.html">Java学习</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/nodejs/index.html">nodejs</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/requirejs/index.html">requirejs</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/index.html">Web前端</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/xxgw/index.html">学习感悟</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/gzdd/index.html">工作点滴</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/jkxx/index.html">接口学习</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/wfl/index.html">未分类</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/ydkf/index.html">移动开发</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/sjms/index.html">设计模式</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/mst/index.html">面试题</a></li>
    				                      </ul>
                </div>
            </div>

            <div id='content' class='row-fluid'>

                <div class='span9 main'>
				<div style="color:blue" align=center>【grunt第二弹】30分钟学会使用grunt打包前端代码（02）</div><br><h1>前言</h1>
<p>上一篇博客，我们简单的介绍了grunt的使用，一些基础点没能覆盖，我们今天有必要看看一些基础知识</p>
<p><a href="http://www.cnblogs.com/yexiaochai/p/3594561.html">【grunt第一弹】30分钟学会使用grunt打包前端代码</a></p>
<h1>配置任务/grunt.initConfig</h1>
<p>前面我们简单的介绍了grunt相关的知识，这里我们这里还需要再熟悉下Gruntfile相关的知识点，比如说配置任务</p>
<p>grunt的任务配置都是在Gruntfile中的grunt.initConfig方法中指定的，这个配置主要都是一些命名性属性<br>比如我们上次用到的合并以及压缩的任务配置：</p>
<div class="cnblogs_code">
<pre><span style="color: #000000;">grunt.initConfig({
    concat: {
        </span><span style="color: #008000;">//</span><span style="color: #008000;">这里是concat任务的配置信息</span>
<span style="color: #000000;">    },
    uglify: {
        </span><span style="color: #008000;">//</span><span style="color: #008000;">这里是uglify任务的配置信息</span>
<span style="color: #000000;">    },
    </span><span style="color: #008000;">//</span><span style="color: #008000;">任意非任务特定属性</span>
    my_property: 'whatever'<span style="color: #000000;">,
    my_src_file: [</span>'foo/*.js', 'bar/*.js'<span style="color: #000000;">]
});</span></pre>
</div>
<p>其中的my_property完全可能读取外部json配置文件，然后在上面任务配置中便可以，比如我们要压缩的文件为准或者最后要放到哪里，便可以在此配置</p>
<p>我们使用grunt的时候，主要工作就是配置任务或者创建任务，实际上就是做一个事件注册，然后由我们触发之，所以grunt的核心还是事件注册<br>每次运行grunt时，我们可以指定运行一个或者多个任务，通过任务决定要做什么，比如我们同时要压缩和合并还要做代码检查</p>
<div class="cnblogs_code">
<pre>grunt.registerTask('default', ['jshint','qunit','concat','uglify']);</pre>
</div>
<p>当运行一个基本任务时，grunt并不会查找配置和检查运行环境，他仅仅运行指定的任务函数，可以传递冒号分割参数，比如：</p>
<div class="cnblogs_code">
<pre>grunt.registerTask('foo', 'A sample task that logs stuff.', <span style="color: #0000ff;">function</span><span style="color: #000000;"> (arg1, arg2) {
  </span><span style="color: #0000ff;">if</span> (arguments.length === 0<span style="color: #000000;">) {
    grunt.log.writeln(</span><span style="color: #0000ff;">this</span>.name + ", no args"<span style="color: #000000;">);
  } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
    grunt.log.writeln(</span><span style="color: #0000ff;">this</span>.name + ", " + arg1 + " " +<span style="color: #000000;"> arg2);
  }
});</span></pre>
</div>
<p>运行结果如下：</p>
<div class="cnblogs_code">
<pre>$ grunt foo:testing:123<span style="color: #000000;">
Running </span>"foo:testing:123"<span style="color: #000000;"> (foo) task
foo, testing </span>123<span style="color: #000000;">

$ grunt foo:testing
Running </span>"foo:testing"<span style="color: #000000;"> (foo) task
foo, testing undefined

$ grunt foo
Running </span>"foo"<span style="color: #000000;"> task
foo, no args</span></pre>
</div>
<p>这里有个多任务的情况，就是一个任务里面实际上第一了多个东东，这个时候就有所不同</p>
<div class="cnblogs_code">
<pre><span style="color: #000000;">grunt.initConfig({
    log: {
        demo01: [</span>1,2,3<span style="color: #000000;">],
        demo02: </span>'hello world'<span style="color: #000000;">,
        demo03: </span><span style="color: #0000ff;">false</span><span style="color: #000000;">
    }
});
grunt.registerTask(</span>'log','log stuff.', <span style="color: #0000ff;">function</span><span style="color: #000000;">(){
    grunt.log.writeln(</span><span style="color: #0000ff;">this</span>.target + ': ' + <span style="color: #0000ff;">this</span><span style="color: #000000;">.data);
});</span></pre>
</div>
<p>如果我们运行，运行情况如下：</p>
<p>???????</p>
<p>更多时候，我们实际场景中都会需要自定义任务，而在我们任务内部使用 grunt.task.run({}) 运行任务<br>这块的知识点，我们后面以实际例子说明</p>
<h1>grunt插件</h1>
<p>学习grunt主要就是学习grunt的插件使用，所以我们今天先来学习常用的几个插件</p>
<h2>grunt-contrib-unglify</h2>
<p>我们仍然以简单例子学习</p>
<div class="cnblogs_code">
<pre>module.exports = <span style="color: #0000ff;">function</span><span style="color: #000000;"> (grunt) {
  grunt.initConfig({
    uglify: {
      my_target: {
        files: {
          </span>'dest/libs.min.js': ['src/zepto.js', 'src/underscoce.js'<span style="color: #000000;">]
        }
      }
    }
  });
  grunt.loadNpmTasks(</span>'grunt-contrib-uglify'<span style="color: #000000;">);
}</span></pre>
</div>
<p>这样会将src里面的zepto等文件打包值dest的lib.min.js中</p>
<h3>压缩一个文件夹的所有文件</h3>
<p>然后这段代码非常有意思，他会将一个文件目录里面的所有js文件打包到另一个文件夹</p>
<div class="cnblogs_code">
<pre>module.exports = <span style="color: #0000ff;">function</span><span style="color: #000000;"> (grunt) {
  grunt.initConfig({
    uglify: {
      my_target: {
        files: [{
          expand: </span><span style="color: #0000ff;">true</span><span style="color: #000000;">,
          cwd: </span>'src'<span style="color: #000000;">,
          src: </span>'**/*.js'<span style="color: #000000;">,
          dest: </span>'dest'<span style="color: #000000;">
        }]
      }
    }
  });
  grunt.loadNpmTasks(</span>'grunt-contrib-uglify'<span style="color: #000000;">);
}</span></pre>
</div>
<p><img src="42147710315986.png" alt=""></p>
<p>若是你希望给你文件的头部加一段注释性语言配置banner信息即可</p>
<div class="cnblogs_code">
<pre><span style="color: #000000;">grunt.initConfig({
  pkg: grunt.file.readJSON(</span>'package.json'<span style="color: #000000;">),
  uglify: {
    options: {
      banner: </span>'/*! 注释信息 */'<span style="color: #000000;">
    },
    my_target: {
      files: {
        </span>'dest/output.min.js': ['src/input.js'<span style="color: #000000;">]
      }
    }
  }
});</span></pre>
</div>
<h2>grunt-contrib-concat</h2>
<p>该插件主要用于代码合并，将多个文件合并为一个，我们前面的uglify也提供了一定合并的功能<br>在可选属性中我们可以设置以下属性：<br>① separator 用于分割各个文件的文字，<br>② banner 前面说到的文件头注释信息，只会出现一次<br>③ footer 文件尾信息，只会出现一次<br>④ stripBanners去掉源代码注释信息（只会清楚/**/这种注释）</p>
<p>一个简单的例子：</p>
<div class="cnblogs_code">
<pre>module.exports = <span style="color: #0000ff;">function</span><span style="color: #000000;"> (grunt) {
  grunt.initConfig({
  concat: {
    options: {
      separator: </span>'/*分割*/'<span style="color: #000000;">,
      banner: </span>'/*测试*/'<span style="color: #000000;">,
      footer: </span>'/*footer*/'<span style="color: #000000;">
     
    },
    dist: {
      src: [</span>'src/zepto.js', 'src/underscore.js', 'src/backbone.js'<span style="color: #000000;">],
      dest: </span>'dist/built.js'<span style="color: #000000;">,
    }
  }
});
  grunt.loadNpmTasks(</span>'grunt-contrib-concat'<span style="color: #000000;">);
}</span></pre>
</div>
<p>合并三个文件为一个，这种在我们源码调试时候很有意义</p>
<h3>构建两个文件夹</h3>
<p>有时候我们可能需要将合并的代码放到不同的文件，这个时候可以这样干</p>
<div class="cnblogs_code">
<pre>module.exports = <span style="color: #0000ff;">function</span><span style="color: #000000;"> (grunt) {
  grunt.initConfig({
    concat: {
      basic: {
        src: [</span>'src/zepto.js'<span style="color: #000000;">],
        dest: </span>'dest/basic.js'<span style="color: #000000;">
      },
      extras: {
        src: [</span>'src/underscore.js', 'src/backbone.js'<span style="color: #000000;">],
        dest: </span>'dest/with_extras.js'<span style="color: #000000;">
      }
    }
  });
  grunt.loadNpmTasks(</span>'grunt-contrib-concat'<span style="color: #000000;">);
}</span></pre>
</div>
<p>这种功能还有这样的写法：</p>
<div class="cnblogs_code">
<pre>module.exports = <span style="color: #0000ff;">function</span><span style="color: #000000;"> (grunt) {
  grunt.initConfig({
    concat: {
      basic_and_extras: {
        files: {
          </span>'dist/basic.js': ['src/test.js', 'src/zepto.js'<span style="color: #000000;">],
          </span>'dist/with_extras.js': ['src/underscore.js', 'src/backbone.js'<span style="color: #000000;">]
        }
      }
    }
  });
  grunt.loadNpmTasks(</span>'grunt-contrib-concat'<span style="color: #000000;">);
}</span></pre>
</div>
<p>第二种写法便于使用配置文件，具体各位选取吧，至于读取配置文件的东西我们这里就先不关注了</p>
<h2>grunt-contrib-jshint</h2>
<p>该插件用于检测文件中的js语法问题，比如我test.js是这样写的：</p>
<div class="cnblogs_code">
<pre>alert('我是叶小钗')</pre>
</div>
<div class="cnblogs_code">
<pre>module.exports = <span style="color: #0000ff;">function</span><span style="color: #000000;"> (grunt) {
  grunt.initConfig({
    jshint: { 
      all: [</span>'src/test.js'<span style="color: #000000;">]
    }
  });
  grunt.loadNpmTasks(</span>'grunt-contrib-jshint'<span style="color: #000000;">);
}</span></pre>
</div>
<p>运行结果是：</p>
<div class="cnblogs_code">
<pre><span style="color: #000000;">$ grunt jshint
Running </span>"jshint:all"<span style="color: #000000;"> (jshint) task
Linting src</span>/test.js ...ERROR
<span style="color: #000000;">[L1:C15] W033: Missing semicolon.
alert(</span>'我是叶小钗')</pre>
</div>
<p>说我缺少一个分号，好像确实缺少.....如果在里面写明显的BUG的话会报错<br>多数时候，我们认为没有分号无伤大雅，所以，我们文件会忽略这个错误：</p>
<div class="cnblogs_code">
<pre><span style="color: #000000;">jshint: {
  options: {
    </span>'-W033': <span style="color: #0000ff;">true</span><span style="color: #000000;">
  },
  all: [</span>'src/test.js'<span style="color: #000000;">]
}</span></pre>
</div>
<p>这里有一个稍微复杂的应用，就是我们合并之前做一次检查，合并之后再做一次检查，我们可以这样写</p>
<div class="cnblogs_code">
<pre>module.exports = <span style="color: #0000ff;">function</span><span style="color: #000000;"> (grunt) {
  grunt.initConfig({
    concat: {
      dist: {
        src: [</span>'src/test01.js', 'src/test02.js'<span style="color: #000000;">],
        dest: </span>'dist/output.js'<span style="color: #000000;">
      }
    },
    jshint: {
      options: {
        </span>'-W033': <span style="color: #0000ff;">true</span><span style="color: #000000;"> 
      },
      pre: [</span>'src/test01.js', 'src/test02.js'<span style="color: #000000;">],
      after: [</span>'dist/output.js'<span style="color: #000000;">]
    }
  });
  grunt.loadNpmTasks(</span>'grunt-contrib-concat'<span style="color: #000000;">);
  grunt.loadNpmTasks(</span>'grunt-contrib-jshint'<span style="color: #000000;">);
}</span></pre>
</div>
<div class="cnblogs_code">
<pre><span style="color: #000000;">$ grunt jshint:pre concat jshint:after
Running </span>"jshint:pre"<span style="color: #000000;"> (jshint) task
</span>&gt;&gt; 2<span style="color: #000000;"> files lint free.
Running </span>"concat:dist"<span style="color: #000000;"> (concat) task
File </span>"dist/output.js"<span style="color: #000000;"> created.
Running </span>"jshint:after"<span style="color: #000000;"> (jshint) task
</span>&gt;&gt; 1 file lint free.</pre>
</div>
<p>这里连续运行了三个任务，先做检查再合并，然后做检测，我这里写了两个简单的文件，如果将jquery搞进去的话，好像还出了不少BUG......<br>所以真的要用它还要自定一些规范，我们这里暂时到这里，先进入下一个插件学习</p>
<h2>grunt-contrib-requirejs</h2>
<p>我们的grunt打包程序极有可能与requirejs一起使用，但是几个插件学习下来又属requireJs的使用最为麻烦，因为网上资源很少，搞到这一段耗掉了我很多精力</p>
<p>这个时候你就会感叹，英语好不一定编程好，英语差想成为高手还是不简单啊！！！</p>
<div class="cnblogs_code">
<pre><span style="color: #000000;">requirejs: {
  compile: {
    options: {
      baseUrl: </span>"path/to/base"<span style="color: #000000;">,
      mainConfigFile: </span>"path/to/config.js"<span style="color: #000000;">,
      name: </span>"path/to/almond", <span style="color: #008000;">//</span><span style="color: #008000;"> assumes a production build using almond</span>
      out: "path/to/optimized.js"<span style="color: #000000;">
    }
  }
}</span></pre>
</div>
<p>官方的例子首先就是这几个属性：</p>
<p>baseUrl 代表所有的js文件都会相对于这个目录</p>
<p>mainConfigFile 配置文件目录</p>
<p>name ？？？</p>
<p>out 输出文件</p>
<p>一些参数我们不太了解，这个时候就只能以例子破之了</p>
<div class="cnblogs_code">
<pre>module.exports = <span style="color: #0000ff;">function</span><span style="color: #000000;"> (grunt) {
  grunt.initConfig({
    requirejs: {
      compile: {
        </span>"options"<span style="color: #000000;">: {
          </span>"baseUrl": "./"<span style="color: #000000;">,
          </span>"paths"<span style="color: #000000;">: {
            </span>"$": "src/zepto"<span style="color: #000000;">,
            </span>"_": "src/underscore"<span style="color: #000000;">,
            </span>"B": "src/backbone"<span style="color: #000000;">,
            </span>"Test": "src/Test01"<span style="color: #000000;">
          },
          </span>"include"<span style="color: #000000;">: [
            </span>"$"<span style="color: #000000;">,
            </span>"_"<span style="color: #000000;">,
            </span>"B"<span style="color: #000000;">,
            </span>"Test"<span style="color: #000000;">
          ],
          </span>"out": "dest/libs.js"<span style="color: #000000;">
        }
      }
    }
  });
  grunt.loadNpmTasks(</span>'grunt-contrib-requirejs'<span style="color: #000000;">);
}</span></pre>
</div>
<p><img src="52271007687092.png" alt=""></p>
<p>这样配置后，会将include里面的文件打包为out对应的文件，paths的本身意义不大，就是用于配置include里面的指向</p>
<p>这个时候我们来加个name看看有神马作用：</p>
<div class="cnblogs_code">
<pre>module.exports = <span style="color: #0000ff;">function</span><span style="color: #000000;"> (grunt) {
  grunt.initConfig({
    requirejs: {
      compile: {
        </span>"options"<span style="color: #000000;">: {
          </span>"baseUrl": "./"<span style="color: #000000;">,
          </span>"name": 'src/test02.js'<span style="color: #000000;">,
          </span>"paths"<span style="color: #000000;">: {
            </span>"$": "src/zepto"<span style="color: #000000;">,
            </span>"_": "src/underscore"<span style="color: #000000;">,
            </span>"B": "src/backbone"<span style="color: #000000;">,
            </span>"Test": "src/Test01"<span style="color: #000000;">
          },
          </span>"include"<span style="color: #000000;">: [
            </span>"$"<span style="color: #000000;">,
            </span>"_"<span style="color: #000000;">,
            </span>"B"<span style="color: #000000;">,
            </span>"Test"<span style="color: #000000;">
          ],
          </span>"out": "dest/libs.js"<span style="color: #000000;">
        }
      }
    }
  });
  grunt.loadNpmTasks(</span>'grunt-contrib-requirejs'<span style="color: #000000;">);
}</span></pre>
</div>
<p>这样的话，会将name对应文件压缩到压缩文件的最前面，但是具体是干什么的，还是不太清楚，其英文注释说是单个文件或者其依赖项优化，不知道优化什么啊。。。囧！！！</p>
<p><span style="line-height: 1.5;">requireJS基本的用法就是这样了，其详细信息，我们过段时间再来看看，下面说一下requireJS的其它用法</span></p>
<p><span style="line-height: 1.5;">我们这里将requireJS的配置信息放在外面，而Gruntfile采用自定义任务的方式完成上面的功能</span></p>
<p><span style="line-height: 1.5;">配置文件/cfg.json</span></p>
<div class="cnblogs_code">
<pre><span style="color: #000000;">{requirejs: {
  </span>"options"<span style="color: #000000;">: {
    </span>"baseUrl": "./"<span style="color: #000000;">,
    </span>"paths"<span style="color: #000000;">: {
      </span>"$": "src/zepto"<span style="color: #000000;">,
      </span>"_": "src/underscore"<span style="color: #000000;">,
      </span>"B": "src/backbone"<span style="color: #000000;">,
      </span>"Test": "src/Test01"<span style="color: #000000;">
    },
    </span>"include"<span style="color: #000000;">: [
      </span>"$"<span style="color: #000000;">,
      </span>"_"<span style="color: #000000;">,
      </span>"B"<span style="color: #000000;">,
      </span>"Test"<span style="color: #000000;">
    ],
    </span>"out": "dest/libs.js"<span style="color: #000000;">
  }
}}</span></pre>
</div>
<p>然后，这里我们便不是有initConfig的做法了，直接使用自定义任务</p>
<div class="cnblogs_code">
<pre>module.exports = <span style="color: #0000ff;">function</span><span style="color: #000000;"> (grunt) {

  grunt.loadNpmTasks(</span>'grunt-contrib-requirejs'<span style="color: #000000;">);

  grunt.registerTask(</span>'build', 'require demo', <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {

    </span><span style="color: #008000;">//</span><span style="color: #008000;">第一步，读取配置信息</span>
    <span style="color: #0000ff;">var</span> cfg = grunt.file.readJSON('cfg.json'<span style="color: #000000;">);
    cfg </span>=<span style="color: #000000;"> cfg.requirejs;
    grunt.config.set(</span>'requirejs'<span style="color: #000000;">, { test: cfg });

    </span><span style="color: #008000;">//</span><span style="color: #008000;">第二步，设置参数</span>
    grunt.log.debug('参数：' +<span style="color: #000000;"> JSON.stringify(grunt.config()));

    </span><span style="color: #008000;">//</span><span style="color: #008000;">第三步跑任务</span>
    grunt.task.run(['requirejs'<span style="color: #000000;">]);
    
  });

}</span></pre>
</div>
<div class="cnblogs_code">
<pre>$ grunt build --<span style="color: #000000;">debug
Running </span>"build"<span style="color: #000000;"> task
[D] Task source: d:\grunt\Gruntfile.js
[D] 参数：{</span>"requirejs":{"test":{"options":{"baseUrl":"./","paths":{"$":"<span style="color: #000000;">src/zept
o</span>","_":"src/underscore","B":"src/backbone","Test":"src/Test01"},"include":["$","<span style="color: #000000;">
_</span>","B","Test"],"out":"dest/libs.js"<span style="color: #000000;">}}}}

Running </span>"requirejs:test"<span style="color: #000000;"> (requirejs) task
[D] Task source: d:\grunt\node_modules\grunt</span>-contrib-<span style="color: #000000;">requirejs\tasks\requirejs.j
s
</span>&gt;&gt; Tracing dependencies <span style="color: #0000ff;">for</span>: d:/grunt/dest/libs.js
&gt;&gt; Uglifying file: d:/grunt/dest/libs.js
&gt;&gt; d:/grunt/dest/libs.js
&gt;&gt; ----------------
&gt;&gt; d:/grunt/src/zepto.js
&gt;&gt; d:/grunt/src/underscore.js
&gt;&gt; d:/grunt/src/backbone.js
&gt;&gt; d:/grunt/src/Test01.js</pre>
</div>
<p>效果还是有的，最后我们介绍下requireJS打包模板文件</p>
<h1>require与模板文件</h1>
<p>我们知道，模板文件一般都是html，比如我们这里的demo01.html，对于这个文件我们应该怎么打包呢？其实很简单......</p>
<p><span style="line-height: 1.5;">需要干两件事情：</span></p>
<p><span style="line-height: 1.5;">① 引入require.text</span></p>
<p><span style="line-height: 1.5;">② 加入模板文件</span></p>
<div class="cnblogs_code">
<pre><span style="color: #000000;">{
  </span>"requirejs"<span style="color: #000000;">: {
    </span>"options"<span style="color: #000000;">: {
      </span>"baseUrl": "./"<span style="color: #000000;">,
      </span>"paths"<span style="color: #000000;">: {
        </span>"$": "src/zepto"<span style="color: #000000;">,
        </span>"_": "src/underscore"<span style="color: #000000;">,
        </span>"B": "src/backbone"<span style="color: #000000;">,
        </span>"test": "src/test01"<span style="color: #000000;">,
        </span>"text": "src/require.text"<span style="color: #000000;">

      },
      </span>"include"<span style="color: #000000;">: [
        </span>"$"<span style="color: #000000;">,
        </span>"_"<span style="color: #000000;">,
        </span>"B"<span style="color: #000000;">,
        </span>"test"<span style="color: #000000;">,
        </span>"text!src/demo01.html"<span style="color: #000000;">
      ],
      </span>"out": "dest/libs.js"<span style="color: #000000;">
    }
  }
}</span></pre>
</div>
<p>于是，我们便成功将模板打入了</p>
<div class="cnblogs_code">
<pre>$ grunt build --<span style="color: #000000;">debug
Running </span>"build"<span style="color: #000000;"> task
[D] Task source: d:\grunt\Gruntfile.js
[D] 参数：{</span>"requirejs":{"test":{"options":{"baseUrl":"./","paths":{"$":"<span style="color: #000000;">src/zept
o</span>","_":"src/underscore","B":"src/backbone","test":"src/test01","text":"<span style="color: #000000;">src/requi
re.text</span>"},"include":["$","_","B","test","text!src/demo01.html"],"out":"<span style="color: #000000;">dest/libs
.js</span>"<span style="color: #000000;">}}}}

Running </span>"requirejs:test"<span style="color: #000000;"> (requirejs) task
[D] Task source: d:\grunt\node_modules\grunt</span>-contrib-<span style="color: #000000;">requirejs\tasks\requirejs.j
s
</span>&gt;&gt; Tracing dependencies <span style="color: #0000ff;">for</span>: d:/grunt/dest/libs.js
&gt;&gt; Uglifying file: d:/grunt/dest/libs.js
&gt;&gt; d:/grunt/dest/libs.js
&gt;&gt; ----------------
&gt;&gt; d:/grunt/src/zepto.js
&gt;&gt; d:/grunt/src/underscore.js
&gt;&gt; d:/grunt/src/backbone.js
&gt;&gt; d:/grunt/src/test01.js
&gt;&gt; d:/grunt/src/require.text.js
&gt;&gt; text!src/demo01.html</pre>
</div>
<p>在文件中我们引用方式是：</p>
<div class="cnblogs_code">
<pre>"text!src/demo01.html" =&gt; '具体文件'</pre>
</div>
<h1><span style="line-height: 1.5;">打包样式文件</span></h1>
<p><span style="line-height: 1.5;">样式文件的打包方式与js不太一样，这里我们下载css-min插件，并且在package.json中新增依赖项</span></p>
<div class="cnblogs_code">
<pre><span style="color: #000000;">{
  </span>"name": "demo"<span style="color: #000000;">,
  </span>"version":         "0.1.0"<span style="color: #000000;">,
  </span>"description":     "demo"<span style="color: #000000;">,
  </span>"license":         "MIT"<span style="color: #000000;">,
  </span>"devDependencies"<span style="color: #000000;">: {
    </span>"grunt":                   "~0.4.1"<span style="color: #000000;">,
    </span>"grunt-contrib-jshint":    "~0.6.3"<span style="color: #000000;">,
    </span>"grunt-contrib-concat":    "~0.3.0"<span style="color: #000000;">,
    </span>"grunt-contrib-uglify":    "~0.2.1"<span style="color: #000000;">,
    </span>"grunt-contrib-requirejs": "~0.4.1"<span style="color: #000000;">,
    </span>"grunt-contrib-copy":      "~0.4.1"<span style="color: #000000;">,
    </span>"grunt-contrib-clean":     "~0.5.0"<span style="color: #000000;">,
    </span>"grunt-strip":             "~0.2.1"<span style="color: #000000;">,
    </span>"grunt-contrib-watch": "~0.6.0"<span style="color: #000000;">,
    </span>"grunt-contrib-cssmin": "~0.5.0"<span style="color: #000000;">
  },
  </span>"dependencies"<span style="color: #000000;">:    {
    </span>"express": "3.x"<span style="color: #000000;">
  }
}</span></pre>
</div>
<div class="cnblogs_code">
<pre>module.exports = <span style="color: #0000ff;">function</span><span style="color: #000000;"> (grunt) {
  grunt.initConfig({
    cssmin: {
      compress: {
        files: {
          </span>'dest/car.min.css'<span style="color: #000000;">: [
          </span>"src/car.css"<span style="color: #000000;">,
          </span>"src/car01.css"<span style="color: #000000;">
        ]
        }
      }
    }
  });

  grunt.loadNpmTasks(</span>'grunt-contrib-cssmin'<span style="color: #000000;">);

}</span></pre>
</div>
<p>如此一来我们便可以压缩合并CSS文件了：</p>
<div class="cnblogs_code">
<pre>$ grunt cssmin --<span style="color: #000000;">debug
Running </span>"cssmin:compress"<span style="color: #000000;"> (cssmin) task
[D] Task source: d:\grunt\node_modules\grunt</span>-contrib-<span style="color: #000000;">cssmin\tasks\cssmin.js
File dest</span>/car.min.css created.</pre>
</div>
<h1>下集预告</h1>
<p>今天，我们一起来学习了一些grunt打包的基础知识，明天我们就进行下面的学习，简单结束这一轮grunt相关的知识</p>
<h2>1 移动打包文件</h2>
<p>我们的开发版本与使用版本可能不在一个位置哦</p>
<h2>2 分支处理</h2>
<p>不同分支打包</p>
<h2>3 native包与HTML5包</h2>
<p>在HTML5嵌入webview的时代，我们当然存在一次打包既要形成网站文件也要形成app文件</p>
<h2>4 分频道打包</h2>
<p>当然可能存在分频道分分支打包的情况</p>
<p>今日到此为止，待续......</p>
<p>&nbsp;</p>
                </div>

                <div class='span3 sidebar'>
                    <h2>导航栏</h2>
                    <ul class="nav nav-tabs nav-stacked">
                             				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/javascriptzdyxhxzsdyjxyzyddf/index.html">javascript中的一些核心知识点以及需要注意的地方</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/[zd]webappdyhzlyzydqdyhdpyjlkkb/index.html">[置顶]【webapp的优化整理】要做移动前端优化的朋友进来看看吧</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/[zd]yddjrwtyjjavascriptsjjzxjsjydjr/index.html">[置顶]【移动端兼容问题研究】javascript事件机制详解（涉及移动兼容）</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/gruntzhb30fzxhsygruntdbqddm/index.html">【grunt整合版】30分钟学会使用grunt打包前端代码</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/gruntdyd30fzxhsygruntdbqddm/index.html">【grunt第一弹】30分钟学会使用grunt打包前端代码</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/gruntdsdgruntzqdsjxmzdyy/index.html">【grunt第三弹】grunt在前端实际项目中的应用</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/gruntded30fzxhsygruntdbqddm02/index.html">【grunt第二弹】30分钟学会使用grunt打包前端代码（02）</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/IScrollsrxxtpyddhadlqs/index.html">【IScroll深入学习】突破移动端黑暗的利器（上）</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/IScrollsrxxjjIScrollynzz/index.html">【IScroll深入学习】解决IScroll疑难杂症</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/iScrollymxx00mniScroll/index.html">【iScroll源码学习00】模拟iScroll</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/iScrollymxx01zbjd/index.html">【iScroll源码学习01】准备阶段</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/iScrollymxx02fjiScrollsghxsjd/index.html">【iScroll源码学习02】分解iScroll三个核心事件点</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/iScrollymxx03iScrollsjjzygdtdsx/index.html">【iScroll源码学习03】iScroll事件机制与滚动条的实现</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/iScrollymxx04flIScrollhx/index.html">【iScroll源码学习04】分离IScroll核心</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/javascriptpxdytyyjc/index.html">【javascript培训第一天】语言基础</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/javascriptpxdstcybl/index.html">【javascript培训第三天】查遗补漏</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/javascriptpxdetDOMyBOM/index.html">【javascript培训第二天】DOM与BOM</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/javascriptjzdsk01mkhbc/index.html">【javascript激增的思考01】模块化编程</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/javascriptjzdsk02mkhyMVC/index.html">【javascript激增的思考02】模块化与MVC</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/javascriptjzdsk03MVVMyKnockout/index.html">【javascript激增的思考03】MVVM与Knockout</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/javascriptjzdsk04MVCyBackbonejs(beta)/index.html">【javascript激增的思考04】MVC与Backbonejs(beta)</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/javascriptmxdxzlrwmyqltkdzb01/index.html">【javascript面向对象之路】让我们一起来坦克大战吧01</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/NodeJSxxbj04xwfbxt/index.html">【NodeJS学习笔记04】新闻发布系统</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/requireJSymxx01ljzgrequireJSdjg/index.html">【requireJS源码学习01】了解整个requireJS的结构</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/requireJSymxx02datamainjzdsx/index.html">【requireJS源码学习02】datamain加载的实现</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/requireJSymxx03xjrequireJSdjzlc/index.html">【requireJS源码学习03】细究requireJS的加载流程</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/UIcjkfygjdrlcjs/index.html">【UI插件】开发一个简单日历插件（上）</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/UIcjjddrlcjxxxMVCsx/index.html">【UI插件】简单的日历插件（下）——学习MVC思想</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/zeptoxxbj01hxff$()/index.html">【zepto学习笔记01】核心方法$()</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/zeptoxxbj01hxff$()b/index.html">【zepto学习笔记01】核心方法$()（补）</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/zeptoxxbj02lsd/index.html">【zepto学习笔记02】零碎点</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/zeptoxxbj03sjjz/index.html">【zepto学习笔记03】事件机制</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/ycmsztjavascriptzdjc/index.html">【一次面试】再谈javascript中的继承</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/ztbackbone01mxModel/index.html">【再探backbone01】模型Model</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/ztbackbone02jhCollection/index.html">【再探backbone02】集合Collection</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/ztbackbone03bkydyyysltgym/index.html">【再探backbone03】博客园单页应用实例（提供源码）</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/ztbackbone04dyyydjslycl/index.html">【再探backbone04】单页应用的基石路由处理</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/ctUnderscorezsmbyq/index.html">【初探Underscore】再说模版引擎</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/ckjavascriptamzAjaxjsxnszddAjax/index.html">【初窥javascript奥秘之Ajax】简述下你所知道的Ajax？</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/ckjavascriptamzsjmpnxnwmyqmdp/index.html">【初窥javascript奥秘之事件冒泡】那些年我们一起冒的泡</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/ckjavascriptamzsjjzldtygdj/index.html">【初窥javascript奥秘之事件机制】论“点透”与“鬼点击”</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/ckjavascriptamzrrzmbddthisnzdxzthiszxnlm/index.html">【初窥javascript奥秘之让人捉摸不定的this】你知道现在this指向哪里吗？？？</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/ckjavascriptamzbbydxbdhlqbcl/index.html">【初窥javascript奥秘之闭包】叶大侠病都好了，求不踩了：）</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/ckjavascriptamzmxdxfzyjc/index.html">【初窥javascript奥秘之面向对象】封装与继承</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/qdmdsjdjgjdnzdljm/index.html">【前端盲点】事件的几个阶段你真的了解么？？？</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/dyyyviewymodelxgsl/index.html">【单页应用】view与model相关梳理</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/dyyyyqldyyybsxjdwbgns/index.html">【单页应用】一起来单页应用吧，实现简单微博功能！（上）</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/dyyyqjkzqappyggxsm/index.html">【单页应用】全局控制器app应该干些什么？</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/dyyywmgrhclkjdcccjgx/index.html">【单页应用】我们该如何处理框架弹出层层级关系？</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/dyyyljMVC/index.html">【单页应用】理解MVC</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/dyyyztxjzviewzjygrhtx/index.html">【单页应用之通信机制】view之间应该如何通信</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/dyyyjkzHistoryxsHistorydgdyyydm/index.html">【单页应用巨坑之History】细数History带给单页应用的噩梦</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/xtszeptofindysyjiosdcjpknrnhtt/index.html">【小贴士】zeptofind元素以及ios弹出键盘可能让你很头疼</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/xtsgytransitionEndanimatedygyqgs/index.html">【小贴士】关于transitionEndanimate的一个有趣故事</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/xtsgzzdbbysjwtdzzmp/index.html">【小贴士】工作中的”闭包“与事件委托的”阻止冒泡“</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/xtstytjavascriptzdreplace/index.html">【小贴士】探一探javascript中的replace</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/xtsxnjpyfixeddgydddt/index.html">【小贴士】虚拟键盘与fixed带给移动端的痛！</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/ttjavascriptsjjzdcsxyl/index.html">【探讨】javascript事件机制底层实现原理</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/mkhbcljrequireJSsxygjddmkjzq/index.html">【模块化编程】理解requireJS实现一个简单的模块加载器</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/zyJavaScriptmfjmtsdqlxkjzbfgndcljz/index.html">【转】【译】JavaScript魔法揭秘探索当前流行框架中部分功能的处理机制</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/zxjavascriptgszl01javascriptcszds/index.html">【追寻javascript高手之路01】javascript参数知多少？</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/zxjavascriptgszl02blzyyzds/index.html">【追寻javascript高手之路02】变量、作用域知多少？</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/zxjavascriptgszl03javascriptdxdld/index.html">【追寻javascript高手之路03】javascript对象大乱斗</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/zxjavascriptgszl04ljprototype/index.html">【追寻javascript高手之路04】理解prototype</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/zxjavascriptgszl05ljsjl/index.html">【追寻javascript高手之路05】理解事件流</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/zgbj04zxzzsj(2)/index.html">【重构笔记04】重新组织数据(2)</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/zgbj05jhtjbds/index.html">【重构笔记05】简化条件表达式</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/zgbj06jhhsdy/index.html">【重构笔记06】简化函数调用</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/ycmshgttbxysjfl/index.html">一次面试回顾——探讨表现与数据分离</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/dhzwebappzdxz/index.html">动画在webapp中的现状</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/ysandriodlqhthdomclicksjqtsxwttj/index.html">原生andriod浏览器回退后dom（click）事件全体失效问题探究</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/scsbdjxysdsbsjytouchsjdnxs/index.html">手持设备点击响应速度，鼠标事件与touch事件的那些事</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/mnbjQueryzeptohxymfx/index.html">迷你版jQuery——zepto核心源码分析</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/dbsgzdlwmlyqxjdddomxzqb/index.html">都别说工资低了，我们来一起写简单的dom选择器吧！</a></li>
    				                                         
                    </ul>
                </div>
            </div>

        </div>
    </body>
</html>