	<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<title>
		</title>
		<style type="text/css">
			.country { margin: 20px; padding: 30px; border: 1px solid black;} .item
			{ margin: 10px; padding: 10px; border: 1px solid black; } .list { margin:
			10px; padding: 10px; border: 1px solid black; min-height: 50px;} #pop {
			border: 1px solid black; padding: 0; position: absolute; display: none;
			background-color: White; } #pop li { list-style: none; padding: 10px; border-bottom:
			1px solid black; } #pop li:hover { background-color: Gray; }
		</style>
 
	<script id="jquery_183" type="text/javascript" class="library" src="/js/sandbox/jquery/jquery-1.8.3.min.js"></script>
	</head>
	<body>
		<div class="country">
			<h2>
				全部国家
			</h2>
			<div id="all" class="list">
			</div>
		</div>
		<div class="country">
			<h2>
				A国家
			</h2>
			<div id="a" class="list">
			</div>
		</div>
		<div class="country">
			<h2>
				B国家
			</h2>
			<div id="b" class="list">
			</div>
		</div>
		<ul id="pop">
			<li attr="a">
				移动到A
			</li>
			<li attr="b">
				移动到B
			</li>
			<li attr="remove">
				删除
			</li>
		</ul>
 
		<script type="text/javascript">
			var array = [];
			var slice = array.slice;
			var Pop = function() {
				this.el = $('#pop');
				var scope = this;
				this.el.on('click',
				function(e) {
					var item = $(e.target).attr('attr');
					scope.click(item);
					scope.el.hide();
				})
			};
			Pop.prototype = {
				show: function(e, callback) {
					this.el.css('top', e.pageY);
					this.el.css('left', e.pageX);
					this.el.show();
					this.click = callback;
				}
			};
			var pop = new Pop();
			var CountryList = function(opts) {
				this.list = opts.list || [];
				this._events = {};
				this.root = opts.el || $('body');
				if (opts.events) {
					for (var k in opts.events) this.on(k, opts.events[k]);
				}
				this.render();
				this.bindEvent();
				this.exec('onLoad')
			};
			CountryList.prototype = {
				render: function() {
					var item;
					for (var i = 0,
					len = this.list.length; i < len; i++) {
						item = $('<span class="item" id="' + i + '">' + this.list[i] + '</span>');
						this.root.append(item);
					}
				},
				bindEvent: function() {
				},
				add: function(name) {
					var item = $('<span class="item" id="' + this.list.length + '">' + name + '</span>');
					this.list.push(name);
					this.root.append(item);
					this.exec('onAdd', name, item);
				},
				remove: function(name) {
					var index = this.list.indexOf(name);
					if (index != -1) {
						this.list.splice(index, 1);
						var item = this.root.find('#' + index);
						item.remove();
					}
					this.exec('onRemove', name, item);
				},
				on: function(type, fn) {
					if (!this._events[type]) {
						this._events[type] = [];
					}
					this._events[type].push(fn);
				},
				exec: function(type) {
					if (!this._events[type]) {
						return;
					}
					var i = 0,
					l = this._events[type].length;
					if (!l) {
						return;
					}
					var args = slice.call(arguments, 1);
					for (; i < l; i++) {
						this._events[type][i].apply(this, args);
					}
				},
				exist: function (name) {
					return this.list.indexOf(name) != -1;
				}
			};


			var all = new CountryList({
				list: ['中国', '美国', '英国', '法国', '朝鲜', '日本'],
				el: $('#all'),
				events: {
					onLoad: function () {
						this.root.on('click', function(e) {
							var el = $(e.target);
							if(el.attr('class') != 'item') return;
							pop.show(e, function(item) {
								if(item == 'a') {
									a.add(el.html())
								} else if(item == 'b') {
									b.add(el.html())
								}
							});
						});
					}


				}
			});
			var a = new CountryList({
				el: $('#a'),
				events: {
					onLoad: function () {
						this.root.on('click', function(e) {
							var el = $(e.target);
							if(el.attr('class') != 'item') return;
							pop.show(e, function(item) {
							    if(item == 'b') {
									b.add(el.html())
								}
							});
						});
					}
				}
			});
			var b = new CountryList({
				el: $('#b'),
				events: {
					onLoad: function () {
						this.root.on('click', function(e) {
							var el = $(e.target);
							if(el.attr('class') != 'item') return;
							pop.show(e, function(item) {
								if(item == 'remove') {
									b.remove(el.html())
								} 
							});
						});
					},
					onAdd: function(name) {
						if(a.exist(name) == false) a.add(name)
					},
					onRemove: function(name) {
						console.log('remove');
					}
				}
			});
		</script>
	</body>
</html>
    	<style></style>
	    		<script></script>
	
<!-- Generated by RunJS (Wed Nov 19 14:34:24 CST 2014) 2ms -->