<!DOCTYPE html>

<html lang="zh">
    <head>
        <meta charset="utf-8">
        <meta name="description" content="android,ios" />
        <meta name="keywords" content="android,ios" />

        <title>叶小钗</title>
        <style type='text/css'>
            body {
                background-color: #CCC;
            }
        </style>
        <link rel="stylesheet" href="../../../css/bootstrap.css" />
    </head>

    <body>
        <div class="container">

            <h1>叶小钗</h1>

            <div class='navbar navbar-inverse'>
                <div class='navbar-inner nav-collapse' style="height: auto;">
                    <ul class="nav">
                              				<li><a href="http://songboriceboy.github.io/xxoo/html/blade/index.html">blade</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/css/index.html">css</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/HTML5&CSS3/index.html">HTML5&CSS3</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/javascript/index.html">javascript</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Javaxx/index.html">Java学习</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/nodejs/index.html">nodejs</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/requirejs/index.html">requirejs</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/index.html">Web前端</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/xxgw/index.html">学习感悟</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/gzdd/index.html">工作点滴</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/jkxx/index.html">接口学习</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/wfl/index.html">未分类</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/ydkf/index.html">移动开发</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/sjms/index.html">设计模式</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/mst/index.html">面试题</a></li>
    				                      </ul>
                </div>
            </div>

            <div id='content' class='row-fluid'>

                <div class='span9 main'>
				<div style="color:blue" align=center>RequireJS与Backbone简单整合</div><br><h1>前言</h1>
<p>昨天我们一起学习了Backbone，最后做了一个备忘录的例子，说是做了不如说是看了下官方提供的例子，所以最终我感觉我们还是没能掌握Backbone，今天还得做个其它例子先。</p>
<p>然后前面也只是草草学习了RequireJS，没做demo，这个周末又在看电影打游戏睡觉瞎折腾，转眼就周日下午了，突然诗性大起，于是作诗一首先：</p>
<p>古有通宵看A片，今有彻夜码代码</p>
<p>好吧，我们开始今天的学习吧，我们今天先用backbone做一个通讯录的东西，然后使用requireJS组装之。</p>
<p>部分参考：<span style="color: #ff0000;"><strong>the5fire的技术博客</strong></span></p>
<h1>简单例子</h1>
<p>做之前我们先来个简单的例子：</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">html </span><span style="color: #ff0000;">xmlns</span><span style="color: #0000ff;">="http://www.w3.org/1999/xhtml"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 2</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 3</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 4</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 5</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 6</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="contactapp"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 7</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">header</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 8</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">h1</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 9</span>                 通讯录<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">h1</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">10</span>         <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">header</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">11</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">section </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="main"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">12</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">ul </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="contact-list"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">13</span>             <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">ul</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">14</span>         <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">section</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">15</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="create"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">16</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="button"</span><span style="color: #ff0000;"> value</span><span style="color: #0000ff;">="增加（弹出框）"</span><span style="color: #ff0000;"> id</span><span style="color: #0000ff;">="addDia"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">17</span>         <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">18</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">19</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">20</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="js/jquery.js"</span><span style="color: #ff0000;"> type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">21</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="js/underscore.js"</span><span style="color: #ff0000;"> type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">22</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="js/backbone.js"</span><span style="color: #ff0000;"> type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">23</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">24</span> <span style="background-color: #f5f5f5; color: #000000;">    (</span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> ($) {
</span><span style="color: #008080;">25</span>         <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> Contact </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> Backbone.Model.extend({
</span><span style="color: #008080;">26</span>             <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">创建一个contact对象，拥有name属性</span>
<span style="color: #008080;">27</span> <span style="background-color: #f5f5f5; color: #000000;">            name: </span><span style="background-color: #f5f5f5; color: #0000ff;">null</span>
<span style="color: #008080;">28</span> <span style="background-color: #f5f5f5; color: #000000;">        });
</span><span style="color: #008080;">29</span>         <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> ContackList </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> Backbone.Collection.extend({
</span><span style="color: #008080;">30</span> <span style="background-color: #f5f5f5; color: #000000;">            initialize: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> (models, options) {
</span><span style="color: #008080;">31</span>                 <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">contact集合</span>
<span style="color: #008080;">32</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.bind(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">add</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">, options.view.addOne);
</span><span style="color: #008080;">33</span> <span style="background-color: #f5f5f5; color: #000000;">            }
</span><span style="color: #008080;">34</span> <span style="background-color: #f5f5f5; color: #000000;">        });
</span><span style="color: #008080;">35</span>         <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> AppView </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> Backbone.View.extend({
</span><span style="color: #008080;">36</span> <span style="background-color: #f5f5f5; color: #000000;">            el: $(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">body</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">),
</span><span style="color: #008080;">37</span> <span style="background-color: #f5f5f5; color: #000000;">            initialize: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> () {
</span><span style="color: #008080;">38</span>                 <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">实例化集合，并传入AppView对象</span>
<span style="color: #008080;">39</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.contacts </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">new</span><span style="background-color: #f5f5f5; color: #000000;"> ContackList(</span><span style="background-color: #f5f5f5; color: #0000ff;">null</span><span style="background-color: #f5f5f5; color: #000000;">, { view: </span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;"> });
</span><span style="color: #008080;">40</span> <span style="background-color: #f5f5f5; color: #000000;">            },
</span><span style="color: #008080;">41</span> <span style="background-color: #f5f5f5; color: #000000;">            events: {
</span><span style="color: #008080;">42</span>                 <span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">click #addDia</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">: </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">addDia</span><span style="background-color: #f5f5f5; color: #000000;">'</span>
<span style="color: #008080;">43</span> <span style="background-color: #f5f5f5; color: #000000;">            },
</span><span style="color: #008080;">44</span> <span style="background-color: #f5f5f5; color: #000000;">            addDia: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> () {
</span><span style="color: #008080;">45</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> name </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> prompt(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">请输入姓名</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">);
</span><span style="color: #008080;">46</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> c </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">new</span><span style="background-color: #f5f5f5; color: #000000;"> Contact({ name: name });
</span><span style="color: #008080;">47</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.contacts.add(c);
</span><span style="color: #008080;">48</span> <span style="background-color: #f5f5f5; color: #000000;">            },
</span><span style="color: #008080;">49</span> <span style="background-color: #f5f5f5; color: #000000;">            addOne: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> (model) {
</span><span style="color: #008080;">50</span> <span style="background-color: #f5f5f5; color: #000000;">                $(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">#contact-list</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">).append(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">&lt;li&gt;</span><span style="background-color: #f5f5f5; color: #000000;">'</span> <span style="background-color: #f5f5f5; color: #000000;">+</span><span style="background-color: #f5f5f5; color: #000000;"> model.get(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">name</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">) </span><span style="background-color: #f5f5f5; color: #000000;">+</span> <span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">&lt;/li&gt;</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">);
</span><span style="color: #008080;">51</span> <span style="background-color: #f5f5f5; color: #000000;">            }
</span><span style="color: #008080;">52</span> <span style="background-color: #f5f5f5; color: #000000;">        });
</span><span style="color: #008080;">53</span>         <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> app </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">new</span><span style="background-color: #f5f5f5; color: #000000;"> AppView();
</span><span style="color: #008080;">54</span> <span style="background-color: #f5f5f5; color: #000000;">    })(jQuery);
</span><span style="color: #008080;">55</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">56</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">html</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p><img src="12914797015526.png" alt=""></p>
<p>PS:感谢the5fire给出的例子，我和我的小伙伴一下都明白了。。。。</p>
<p>以上代码涉及到Backbone三个部分：View、Model、Collection，我们在addOne里面使用了jquery绑定dom以后会将之消除。</p>
<p>各位请看这个代码：</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">this</span>.bind('add', options.view.addOne);</pre>
</div>
<p>在集合中绑定了add事件，在addDia最后执行了，然后触发集合的事件，才最后将dom添加完成。</p>
<h1>知识回顾（参考the5fire）</h1>
<p>the5fire关于backbone的文章写的很好（<a href="http://www.the5fire.com/">http://www.the5fire.com</a>），我们一起来看看顺便回顾下我们的知识。</p>
<h2>model</h2>
<div class="cnblogs_code">
<pre>Man =<span style="color: #000000;"> Backbone.Model.extend({
        initialize: </span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){
            alert(</span>'Hey, you create me!'<span style="color: #000000;">);
        }
    });
</span><span style="color: #0000ff;">var</span> man = <span style="color: #0000ff;">new</span> Man;</pre>
</div>
<p>这个是一个model最简单的model，initialize中的方法一来就会执行，这里就会弹出框：</p>
<p><img src="6479866629292.png" alt=""></p>
<h3>对象赋值</h3>
<div class="cnblogs_code">
<pre>Man =<span style="color: #000000;"> Backbone.Model.extend({
    initialize: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
        alert(</span>'Hey, you create me!'<span style="color: #000000;">);
    },
    defaults: {
        name: </span>'张三'<span style="color: #000000;">,
        age: </span>'38'<span style="color: #000000;">
    }
});
</span><span style="color: #0000ff;">var</span> man = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Man;
alert(man.get(</span>'name'<span style="color: #000000;">));
</span><span style="color: #008000;">//</span><span style="color: #008000;">man.set({ name: 'the5fire', age: '10' });</span></pre>
</div>
<p>若是不赋值就使用默认值，若是赋值则采用给的值。</p>
<h3>事件与方法</h3>
<div class="cnblogs_code">
<pre>Man =<span style="color: #000000;"> Backbone.Model.extend({
    initialize: </span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){
        alert(</span>'Hey, you create me!'<span style="color: #000000;">);
        </span><span style="color: #008000;">//</span><span style="color: #008000;">初始化时绑定监听</span>
        <span style="color: #0000ff;">this</span>.bind("change:name",<span style="color: #0000ff;">function</span><span style="color: #000000;">(){
            </span><span style="color: #0000ff;">var</span> name = <span style="color: #0000ff;">this</span>.get("name"<span style="color: #000000;">);
            alert(</span>"你改变了name属性为：" +<span style="color: #000000;"> name);
        });
    },
    defaults: {
        name:</span>'张三'<span style="color: #000000;">,
        age: </span>'38'<span style="color: #000000;">
    },
    aboutMe: </span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){
        </span><span style="color: #0000ff;">return</span> '我叫' + <span style="color: #0000ff;">this</span>.get('name') + ',今年' + <span style="color: #0000ff;">this</span>.get('age') + '岁'<span style="color: #000000;">;
    }
});
</span><span style="color: #0000ff;">var</span> man = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Man;
man.set({name:</span>'the5fire'})  <span style="color: #008000;">//</span><span style="color: #008000;">触发绑定的change事件，alert。</span></pre>
</div>
<p>可以定义方法aboutMe，也可以在initialize中绑定事件以监听某个属性的变化。</p>
<h3>验证及错误提示</h3>
<div class="cnblogs_code">
<pre>Man =<span style="color: #000000;"> Backbone.Model.extend({
    initialize: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
        </span><span style="color: #0000ff;">this</span>.bind("error", <span style="color: #0000ff;">function</span><span style="color: #000000;"> (model, error) {
            alert(error);
        });
    },
    validate: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> (attributes) {
        </span><span style="color: #0000ff;">if</span> (attributes.name == ''<span style="color: #000000;">) {
            </span><span style="color: #0000ff;">return</span> "name不能为空！"<span style="color: #000000;">;
        }
    },
});
</span><span style="color: #0000ff;">var</span> man = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Man;
man.set({ name: </span>'' }); <span style="color: #008000;">//</span><span style="color: #008000;">根据验证规则，弹出错误提示。</span></pre>
</div>
<p>此处验证不通过便会触发错误提示。</p>
<p><span style="color: #ff0000;">PS:经测试并没有提示，问题后面跟进</span></p>
<p><span style="color: #ff0000;">PS：最后证明有反应，我调试页面用错了</span></p>
<h3>对象持久化</h3>
<p>对象持久化可以是服务器也可以是本地存储，具体就不展开了。</p>
<h2>collection</h2>
<p>集合其实就是model的有序集合，经过周末的学习，我们应该比较熟悉了：</p>
<div class="cnblogs_code">
<pre>Book =<span style="color: #000000;"> Backbone.Model.extend({
    defaults: {    </span><span style="color: #008000;">//</span><span style="color: #008000;"> 感谢网友蓝色动力指正改为defaults</span>
        title: 'default'<span style="color: #000000;">
    },
    initialize: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
        </span><span style="color: #008000;">//</span><span style="color: #008000;">alert('Hey, you create me!');</span>
<span style="color: #000000;">    }
});
BookShelf </span>=<span style="color: #000000;"> Backbone.Collection.extend({
    model: Book
});
</span><span style="color: #0000ff;">var</span> book1 = <span style="color: #0000ff;">new</span> Book({ title: 'book1'<span style="color: #000000;"> });
</span><span style="color: #0000ff;">var</span> book2 = <span style="color: #0000ff;">new</span> Book({ title: 'book2'<span style="color: #000000;"> });
</span><span style="color: #0000ff;">var</span> book3 = <span style="color: #0000ff;">new</span> Book({ title: 'book3'<span style="color: #000000;"> });
</span><span style="color: #008000;">//</span><span style="color: #008000;">var bookShelf = new BookShelf([book1, book2, book3]); </span><span style="color: #008000;">
//</span><span style="color: #008000;">注意这里面是数组,或者使用add</span>
<span style="color: #0000ff;">var</span> bookShelf = <span style="color: #0000ff;">new</span><span style="color: #000000;"> BookShelf;
bookShelf.add(book1);
bookShelf.add(book2);
bookShelf.add(book3);
bookShelf.remove(book3);
</span><span style="color: #008000;">//</span><span style="color: #008000;">基于underscore这个js库，还可以使用each的方法获取collection中的数据</span>
bookShelf.each(<span style="color: #0000ff;">function</span><span style="color: #000000;"> (book) {
    alert(book.get(</span>'title'<span style="color: #000000;">));
});</span></pre>
</div>
<h3>fetch</h3>
<p>我们若是要与服务器通讯获取数据，需要先为bookshelf定义url：</p>
<div class="cnblogs_code">
<pre>bookShelf.fetch({ url: '/getbooks/', success: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (collection, response) {
    collection.each(</span><span style="color: #0000ff;">function</span><span style="color: #000000;"> (book) {
        alert(book.get(</span>'title'<span style="color: #000000;">));
    });
}, error: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
    alert(</span>'error'<span style="color: #000000;">);
}
});</span></pre>
</div>
<div class="cnblogs_code">
<pre><span style="color: #008000;">//</span><span style="color: #008000;">对应的BookShelf的返回格式如下：</span>
[{'title':'book1'},{'title':'book2'}.....]</pre>
</div>
<p>此后我们需要将页面的dom与数据同步，所以会用到reset事件;</p>
<div class="cnblogs_code">
<pre>bookShelf.bind('reset'<span style="color: #000000;">,showAllBooks);
showAllBooks </span>= <span style="color: #0000ff;">function</span><span style="color: #000000;">(){
    bookShelf.each(</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(book){
        ​</span><span style="color: #008000;">//</span><span style="color: #008000;">将book数据渲染到页面。</span>
<span style="color: #000000;">    });
}</span></pre>
</div>
<div class="cnblogs_code" onclick="cnblogs_code_show('2d315621-778a-4750-a0db-0dc1e0635872')"><img id="code_img_closed_2d315621-778a-4750-a0db-0dc1e0635872" class="code_img_closed" src="43570758473519.gif" alt=""><img id="code_img_opened_2d315621-778a-4750-a0db-0dc1e0635872" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('2d315621-778a-4750-a0db-0dc1e0635872',event)" src="16365178109279.gif" alt="">
<div id="cnblogs_code_open_2d315621-778a-4750-a0db-0dc1e0635872" class="cnblogs_code_hide">
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">html</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 2</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 3</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;</span>the5fire-backbone-collection<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 4</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 5</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 6</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 7</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 8</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="http://ajax.cdnjs.com/ajax/libs/underscore.js/1.1.4/underscore-min.js"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 9</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="http://ajax.cdnjs.com/ajax/libs/backbone.js/0.3.3/backbone-min.js"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">10</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">11</span> <span style="background-color: #f5f5f5; color: #000000;">(</span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> ($) {
</span><span style="color: #008080;">12</span>     <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">collection是一个简单的models的有序集合</span>
<span style="color: #008080;">13</span>     <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">1、一个简单的例子</span>
<span style="color: #008080;">14</span> 
<span style="color: #008080;">15</span> <span style="background-color: #f5f5f5; color: #000000;">    Book </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> Backbone.Model.extend({
</span><span style="color: #008080;">16</span> <span style="background-color: #f5f5f5; color: #000000;">        defaults : {    </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;"> 感谢网友蓝色动力指正改为defaults</span>
<span style="color: #008080;">17</span> <span style="background-color: #f5f5f5; color: #000000;">            title:</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">default</span><span style="background-color: #f5f5f5; color: #000000;">'</span>
<span style="color: #008080;">18</span> <span style="background-color: #f5f5f5; color: #000000;">        },
</span><span style="color: #008080;">19</span> <span style="background-color: #f5f5f5; color: #000000;">        initialize: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;">(){
</span><span style="color: #008080;">20</span>             <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">alert('Hey, you create me!');</span>
<span style="color: #008080;">21</span> <span style="background-color: #f5f5f5; color: #000000;">        }
</span><span style="color: #008080;">22</span> <span style="background-color: #f5f5f5; color: #000000;">    });
</span><span style="color: #008080;">23</span> <span style="background-color: #f5f5f5; color: #000000;">    BookShelf </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> Backbone.Collection.extend({
</span><span style="color: #008080;">24</span> <span style="background-color: #f5f5f5; color: #000000;">        model : Book
</span><span style="color: #008080;">25</span> <span style="background-color: #f5f5f5; color: #000000;">    });
</span><span style="color: #008080;">26</span> 
<span style="color: #008080;">27</span>     <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> book1 </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">new</span><span style="background-color: #f5f5f5; color: #000000;"> Book({title : </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">book1</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">});
</span><span style="color: #008080;">28</span>     <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> book2 </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">new</span><span style="background-color: #f5f5f5; color: #000000;"> Book({title : </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">book2</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">});
</span><span style="color: #008080;">29</span>     <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> book3 </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">new</span><span style="background-color: #f5f5f5; color: #000000;"> Book({title : </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">book3</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">});
</span><span style="color: #008080;">30</span> 
<span style="color: #008080;">31</span>     <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">var bookShelf = new BookShelf([book1, book2, book3]); //注意这里面是数组,或者使用add</span>
<span style="color: #008080;">32</span>     <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> bookShelf </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">new</span><span style="background-color: #f5f5f5; color: #000000;"> BookShelf;
</span><span style="color: #008080;">33</span> <span style="background-color: #f5f5f5; color: #000000;">    bookShelf.add(book1);
</span><span style="color: #008080;">34</span> <span style="background-color: #f5f5f5; color: #000000;">    bookShelf.add(book2);
</span><span style="color: #008080;">35</span> <span style="background-color: #f5f5f5; color: #000000;">    bookShelf.add(book3);
</span><span style="color: #008080;">36</span> <span style="background-color: #f5f5f5; color: #000000;">    bookShelf.remove(book3);
</span><span style="color: #008080;">37</span>     <span style="background-color: #f5f5f5; color: #008000;">/*</span>
<span style="color: #008080;">38</span> <span style="background-color: #f5f5f5; color: #008000;">    for(var i=0; i&lt;bookShelf.models.length; i++) {
</span><span style="color: #008080;">39</span> <span style="background-color: #f5f5f5; color: #008000;">        alert(bookShelf.models[i].get('title'));
</span><span style="color: #008080;">40</span> <span style="background-color: #f5f5f5; color: #008000;">    }
</span><span style="color: #008080;">41</span>     <span style="background-color: #f5f5f5; color: #008000;">*/</span>
<span style="color: #008080;">42</span>     <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">基于underscore这个js库，还可以使用each的方法获取collection中的数据</span>
<span style="color: #008080;">43</span> <span style="background-color: #f5f5f5; color: #000000;">    bookShelf.each(</span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;">(book){
</span><span style="color: #008080;">44</span> <span style="background-color: #f5f5f5; color: #000000;">        alert(book.get(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">title</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">));
</span><span style="color: #008080;">45</span> <span style="background-color: #f5f5f5; color: #000000;">    });
</span><span style="color: #008080;">46</span> 
<span style="color: #008080;">47</span>     <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">2、使用fetch从服务器端获取数据,使用reset渲染</span>
<span style="color: #008080;">48</span> <span style="background-color: #f5f5f5; color: #000000;">    bookShelf.bind(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">reset</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">, showAllBooks);
</span><span style="color: #008080;">49</span> <span style="background-color: #f5f5f5; color: #000000;">    bookShelf.fetch({url:</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">/getbooks/</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">,success:</span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;">(collection,response){
</span><span style="color: #008080;">50</span> <span style="background-color: #f5f5f5; color: #000000;">        collection.each(</span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;">(book){
</span><span style="color: #008080;">51</span> <span style="background-color: #f5f5f5; color: #000000;">            alert(book.get(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">title</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">));
</span><span style="color: #008080;">52</span> <span style="background-color: #f5f5f5; color: #000000;">        });
</span><span style="color: #008080;">53</span> <span style="background-color: #f5f5f5; color: #000000;">    },error:</span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;">(){
</span><span style="color: #008080;">54</span> <span style="background-color: #f5f5f5; color: #000000;">        alert(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">error</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">);
</span><span style="color: #008080;">55</span> <span style="background-color: #f5f5f5; color: #000000;">    }});
</span><span style="color: #008080;">56</span> <span style="background-color: #f5f5f5; color: #000000;">    showAllBooks </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;">(){
</span><span style="color: #008080;">57</span> <span style="background-color: #f5f5f5; color: #000000;">        bookShelf.each(</span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;">(book){
</span><span style="color: #008080;">58</span> <span style="background-color: #f5f5f5; color: #000000;">            ​</span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">将book数据渲染到页面。</span>
<span style="color: #008080;">59</span> <span style="background-color: #f5f5f5; color: #000000;">        });
</span><span style="color: #008080;">60</span> <span style="background-color: #f5f5f5; color: #000000;">    }
</span><span style="color: #008080;">61</span>     <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">上述代码仅仅均为可正常执行的代码，不过关于服务器端的实例在后面会有。</span>
<span style="color: #008080;">62</span> <span style="background-color: #f5f5f5; color: #000000;">})(jQuery);
</span><span style="color: #008080;">63</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">64</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">html</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<span class="cnblogs_code_collapse">完整参考代码</span></div>
<h2>Router（之前好像没看到）</h2>
<p>之前我们学习的时候好像错过了Router了，路由的出现是想控制URL呢，Backbone.Router会把#标签当做url路径。</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('4e813e1d-14b8-4ce6-a1a4-bc925adf29e2')"><img id="code_img_closed_4e813e1d-14b8-4ce6-a1a4-bc925adf29e2" class="code_img_closed" src="43570758473519.gif" alt=""><img id="code_img_opened_4e813e1d-14b8-4ce6-a1a4-bc925adf29e2" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('4e813e1d-14b8-4ce6-a1a4-bc925adf29e2',event)" src="16365178109279.gif" alt="">
<div id="cnblogs_code_open_4e813e1d-14b8-4ce6-a1a4-bc925adf29e2" class="cnblogs_code_hide">
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">html</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 2</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 3</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;</span>the5fire-backbone-router<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 4</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 5</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 6</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">a </span><span style="color: #ff0000;">href</span><span style="color: #0000ff;">="#/posts/120"</span><span style="color: #0000ff;">&gt;</span>Post 120<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">a</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 7</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">a </span><span style="color: #ff0000;">href</span><span style="color: #0000ff;">="#/download/user/images/hey.gif"</span><span style="color: #0000ff;">&gt;</span>download gif<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">a</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 8</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">a </span><span style="color: #ff0000;">href</span><span style="color: #0000ff;">="#/dashboard/graph"</span><span style="color: #0000ff;">&gt;</span>Load Route/Action View<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">a</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 9</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">10</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">11</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="http://ajax.cdnjs.com/ajax/libs/underscore.js/1.1.4/underscore-min.js"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">12</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="http://documentcloud.github.com/backbone/backbone-min.js"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">13</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">14</span> <span style="background-color: #f5f5f5; color: #000000;">    (</span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> ($) {
</span><span style="color: #008080;">15</span>         <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">Backbone中的router，见名知意，router有路由的意思，显然这里是要控制url的。</span>
<span style="color: #008080;">16</span>         <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">Backbone.Router会把你连接中的#标签当做是url路径</span>
<span style="color: #008080;">17</span>         <span style="background-color: #f5f5f5; color: #008000;">/*</span><span style="background-color: #f5f5f5; color: #008000;">*
</span><span style="color: #008080;">18</span> <span style="background-color: #f5f5f5; color: #008000;">        //1、来看一个简单的例子
</span><span style="color: #008080;">19</span> <span style="background-color: #f5f5f5; color: #008000;">        var AppRouter = Backbone.Router.extend({
</span><span style="color: #008080;">20</span> <span style="background-color: #f5f5f5; color: #008000;">            routes: {
</span><span style="color: #008080;">21</span> <span style="background-color: #f5f5f5; color: #008000;">                "*actions" : "defaultRoute"
</span><span style="color: #008080;">22</span> <span style="background-color: #f5f5f5; color: #008000;">            },
</span><span style="color: #008080;">23</span> <span style="background-color: #f5f5f5; color: #008000;">            defaultRoute : function(actions){
</span><span style="color: #008080;">24</span> <span style="background-color: #f5f5f5; color: #008000;">                alert(actions);
</span><span style="color: #008080;">25</span> <span style="background-color: #f5f5f5; color: #008000;">            }
</span><span style="color: #008080;">26</span> <span style="background-color: #f5f5f5; color: #008000;">        });
</span><span style="color: #008080;">27</span> 
<span style="color: #008080;">28</span> <span style="background-color: #f5f5f5; color: #008000;">        var app_router = new AppRouter;
</span><span style="color: #008080;">29</span> 
<span style="color: #008080;">30</span> <span style="background-color: #f5f5f5; color: #008000;">        Backbone.history.start();
</span><span style="color: #008080;">31</span> 
<span style="color: #008080;">32</span> 
<span style="color: #008080;">33</span> <span style="background-color: #f5f5f5; color: #008000;">        //2、既然是对url进行匹配那么它应该不仅仅只是简单的静态匹配，应该具有传递参数的功能，所以下面再来一个动态的router的例子.
</span><span style="color: #008080;">34</span> <span style="background-color: #f5f5f5; color: #008000;">        var AppRouter = Backbone.Router.extend({
</span><span style="color: #008080;">35</span> <span style="background-color: #f5f5f5; color: #008000;">            routes: {
</span><span style="color: #008080;">36</span> <span style="background-color: #f5f5f5; color: #008000;">                "/posts/:id" : "getPost",
</span><span style="color: #008080;">37</span> <span style="background-color: #f5f5f5; color: #008000;">                "*actions" : "defaultRoute"
</span><span style="color: #008080;">38</span> <span style="background-color: #f5f5f5; color: #008000;">            },
</span><span style="color: #008080;">39</span> <span style="background-color: #f5f5f5; color: #008000;">            getPost: function(id) {
</span><span style="color: #008080;">40</span> <span style="background-color: #f5f5f5; color: #008000;">                alert(id);
</span><span style="color: #008080;">41</span> <span style="background-color: #f5f5f5; color: #008000;">            },
</span><span style="color: #008080;">42</span> <span style="background-color: #f5f5f5; color: #008000;">            defaultRoute : function(actions){
</span><span style="color: #008080;">43</span> <span style="background-color: #f5f5f5; color: #008000;">                alert(actions);
</span><span style="color: #008080;">44</span> <span style="background-color: #f5f5f5; color: #008000;">            }
</span><span style="color: #008080;">45</span> <span style="background-color: #f5f5f5; color: #008000;">        });
</span><span style="color: #008080;">46</span> 
<span style="color: #008080;">47</span> <span style="background-color: #f5f5f5; color: #008000;">        var app_router = new AppRouter;
</span><span style="color: #008080;">48</span> 
<span style="color: #008080;">49</span> <span style="background-color: #f5f5f5; color: #008000;">        Backbone.history.start();
</span><span style="color: #008080;">50</span> <span style="background-color: #f5f5f5; color: #008000;">        *</span><span style="background-color: #f5f5f5; color: #008000;">*/</span>
<span style="color: #008080;">51</span>         <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">从上面已经可以看到匹配#标签之后内容的方法，有两种：一种是用&ldquo;:&rdquo;来把#后面的对应的位置作为参数；还有一种是&ldquo;*&rdquo;，它可以匹配所有的url，下面再来演练一下。</span>
<span style="color: #008080;">52</span>         <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> AppRouter </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> Backbone.Router.extend({
</span><span style="color: #008080;">53</span> <span style="background-color: #f5f5f5; color: #000000;">            routes: {
</span><span style="color: #008080;">54</span>                 <span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">/posts/:id</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;"> : </span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">getPost</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">,
</span><span style="color: #008080;">55</span>                 <span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">/download/*path</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">: </span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">downloadFile</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">,  </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">对应的链接为&lt;a href="#/download/user/images/hey.gif"&gt;download gif&lt;/a&gt;</span>
<span style="color: #008080;">56</span>                         <span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">/:route/:action</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">: </span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">loadView</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">,      </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">对应的链接为&lt;a href="#/dashboard/graph"&gt;Load Route/Action View&lt;/a&gt;</span>
<span style="color: #008080;">57</span>                 <span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">*actions</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;"> : </span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">defaultRoute</span><span style="background-color: #f5f5f5; color: #000000;">"</span>
<span style="color: #008080;">58</span> <span style="background-color: #f5f5f5; color: #000000;">            },
</span><span style="color: #008080;">59</span> <span style="background-color: #f5f5f5; color: #000000;">            getPost: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;">(id) {
</span><span style="color: #008080;">60</span> <span style="background-color: #f5f5f5; color: #000000;">                alert(id);
</span><span style="color: #008080;">61</span> <span style="background-color: #f5f5f5; color: #000000;">            },
</span><span style="color: #008080;">62</span> <span style="background-color: #f5f5f5; color: #000000;">            defaultRoute : </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;">(actions){
</span><span style="color: #008080;">63</span> <span style="background-color: #f5f5f5; color: #000000;">                alert(actions);
</span><span style="color: #008080;">64</span> <span style="background-color: #f5f5f5; color: #000000;">            },
</span><span style="color: #008080;">65</span> <span style="background-color: #f5f5f5; color: #000000;">            downloadFile: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;">( path ){
</span><span style="color: #008080;">66</span> <span style="background-color: #f5f5f5; color: #000000;">                alert(path); </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;"> user/images/hey.gif</span>
<span style="color: #008080;">67</span> <span style="background-color: #f5f5f5; color: #000000;">            },
</span><span style="color: #008080;">68</span> <span style="background-color: #f5f5f5; color: #000000;">            loadView: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;">( route, action ){
</span><span style="color: #008080;">69</span> <span style="background-color: #f5f5f5; color: #000000;">                alert(route </span><span style="background-color: #f5f5f5; color: #000000;">+</span> <span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">_</span><span style="background-color: #f5f5f5; color: #000000;">"</span> <span style="background-color: #f5f5f5; color: #000000;">+</span><span style="background-color: #f5f5f5; color: #000000;"> action); </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;"> dashboard_graph</span>
<span style="color: #008080;">70</span> <span style="background-color: #f5f5f5; color: #000000;">            }
</span><span style="color: #008080;">71</span> <span style="background-color: #f5f5f5; color: #000000;">        });
</span><span style="color: #008080;">72</span> 
<span style="color: #008080;">73</span>         <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> app_router </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">new</span><span style="background-color: #f5f5f5; color: #000000;"> AppRouter;
</span><span style="color: #008080;">74</span> 
<span style="color: #008080;">75</span> <span style="background-color: #f5f5f5; color: #000000;">        Backbone.history.start();
</span><span style="color: #008080;">76</span> 
<span style="color: #008080;">77</span> <span style="background-color: #f5f5f5; color: #000000;">    })(jQuery);
</span><span style="color: #008080;">78</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">79</span> 
<span style="color: #008080;">80</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">html</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<span class="cnblogs_code_collapse">路由的例子</span></div>
<p>我们暂时不管这个，否则任务完成不了了。</p>
<h2>View</h2>
<p>这个看完，我们就要继续今天的学习了，这里用了太多时间啦。</p>
<p>backbone的view是用来显示model数据到页面的，同时监听dom事件并相应变化。</p>
<p>来看看我们的页面主体：</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">html </span><span style="color: #ff0000;">xmlns</span><span style="color: #0000ff;">="http://www.w3.org/1999/xhtml"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 2</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 3</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 4</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 5</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 6</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="search_container"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 7</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 8</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="text/template"</span><span style="color: #ff0000;"> id</span><span style="color: #0000ff;">="search_template"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 9</span>         <span style="background-color: #f5f5f5; color: #000000;">&lt;</span><span style="background-color: #f5f5f5; color: #000000;">label</span><span style="background-color: #f5f5f5; color: #000000;">&gt;&lt;%=</span><span style="background-color: #f5f5f5; color: #000000;"> search_label </span><span style="background-color: #f5f5f5; color: #000000;">%&gt;&lt;</span><span style="background-color: #f5f5f5; color: #000000;">/</span><span style="background-color: #f5f5f5; color: #000000;">label&gt;</span>
<span style="color: #008080;">10</span>         <span style="background-color: #f5f5f5; color: #000000;">&lt;</span><span style="background-color: #f5f5f5; color: #000000;">input type</span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">text</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;"> id</span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">search_input</span><span style="background-color: #f5f5f5; color: #000000;">"</span> <span style="background-color: #f5f5f5; color: #000000;">/</span><span style="background-color: #f5f5f5; color: #000000;">&gt;</span>
<span style="color: #008080;">11</span>         <span style="background-color: #f5f5f5; color: #000000;">&lt;</span><span style="background-color: #f5f5f5; color: #000000;">input type</span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">button</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;"> id</span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">search_button</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;"> value</span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">Search</span><span style="background-color: #f5f5f5; color: #000000;">"</span> <span style="background-color: #f5f5f5; color: #000000;">/</span><span style="background-color: #f5f5f5; color: #000000;">&gt;</span>
<span style="color: #008080;">12</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">13</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">14</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="js/jquery.js"</span><span style="color: #ff0000;"> type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">15</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="js/underscore.js"</span><span style="color: #ff0000;"> type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">16</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="js/backbone.js"</span><span style="color: #ff0000;"> type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">17</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">18</span> <span style="background-color: #f5f5f5; color: #000000;">    (</span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> ($) {
</span><span style="color: #008080;">19</span>         <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">此处添加下面的试验代码</span>
<span style="color: #008080;">20</span> <span style="background-color: #f5f5f5; color: #000000;">    })(jQuery);
</span><span style="color: #008080;">21</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">22</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">html</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<h3>el属性</h3>
<p>该属性引用dom中的一些元素，每个view都会有这个属性，没有声明就默认创建空div</p>
<div class="cnblogs_code">
<pre>(<span style="color: #0000ff;">function</span><span style="color: #000000;"> ($) {
    SearchView </span>=<span style="color: #000000;"> Backbone.View.extend({
        initialize: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
            </span><span style="color: #008000;">//</span><span style="color: #008000;">this.render();</span>
<span style="color: #000000;">        },
        render: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
            </span><span style="color: #008000;">//</span><span style="color: #008000;">使用underscore这个库，来编译模板</span>
            <span style="color: #0000ff;">var</span> template = _.template($("#search_template"<span style="color: #000000;">).html(), {});
            </span><span style="color: #008000;">//</span><span style="color: #008000;">加载模板到对应的el属性中</span>
            <span style="color: #008000;">//</span><span style="color: #008000;">this.el.html(template);   //感谢 子不语同学指正。</span>
            $(<span style="color: #0000ff;">this</span><span style="color: #000000;">.el).html(template);
        }
    });
    </span><span style="color: #0000ff;">var</span> searchView = <span style="color: #0000ff;">new</span> SearchView({ el: $("#search_container"<span style="color: #000000;">) });
    searchView.render();  </span><span style="color: #008000;">//</span><span style="color: #008000;">这个reander的方法可以放到view的构造函数中</span>
})(jQuery);</pre>
</div>
<p><img src="515136010155391.png" alt=""></p>
<p><span style="font: 15px/26px 'Helvetica Neue', Helvetica, Arial, sans-serif; color: #333333; text-transform: none; text-indent: 0px; letter-spacing: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; font-size-adjust: none; font-stretch: normal; background-color: #ffffff; -webkit-text-stroke-width: 0px;">[这里有一个错误，因为这个例子里没有传入search_label这个变量，所以你运行的时候要把html的模板中的那个变量改掉才行。]</span></p>
<h3>事件绑定</h3>
<div class="cnblogs_code">
<pre>(<span style="color: #0000ff;">function</span><span style="color: #000000;"> ($) {
    SearchView </span>=<span style="color: #000000;"> Backbone.View.extend({
        initialize: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
            </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.render();
        },
        render: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
            </span><span style="color: #008000;">//</span><span style="color: #008000;">使用underscore这个库，来编译模板</span>
            <span style="color: #0000ff;">var</span> template = _.template($("#search_template"<span style="color: #000000;">).html(), {});
            </span><span style="color: #008000;">//</span><span style="color: #008000;">加载模板到对应的el属性中</span>
            <span style="color: #008000;">//</span><span style="color: #008000;">this.el.html(template);</span>
            $(<span style="color: #0000ff;">this</span><span style="color: #000000;">.el).html(template);
        },
        events: {  </span><span style="color: #008000;">//</span><span style="color: #008000;">就是在这里绑定的</span>
            'click input[type=button]': 'doSearch'  <span style="color: #008000;">//</span><span style="color: #008000;">定义类型为button的input标签的点击事件，触发函数doSearch</span>
<span style="color: #000000;">        },

        doSearch: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> (event) {
            alert(</span>"search for " + $("#search_input"<span style="color: #000000;">).val());
        }
    });
    </span><span style="color: #0000ff;">var</span> searchView = <span style="color: #0000ff;">new</span> SearchView({ el: $("#search_container"<span style="color: #000000;">) });
})(jQuery);</span></pre>
</div>
<h3>模板</h3>
<p>此处的模板，就是以数据替换其中的特殊标签&lt;%= search_label %&gt;</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">html </span><span style="color: #ff0000;">xmlns</span><span style="color: #0000ff;">="http://www.w3.org/1999/xhtml"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 2</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 3</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 4</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 5</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 6</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="search_container"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 7</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 8</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="text/template"</span><span style="color: #ff0000;"> id</span><span style="color: #0000ff;">="search_template"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 9</span>         <span style="background-color: #f5f5f5; color: #000000;">&lt;</span><span style="background-color: #f5f5f5; color: #000000;">label</span><span style="background-color: #f5f5f5; color: #000000;">&gt;&lt;%=</span><span style="background-color: #f5f5f5; color: #000000;"> search_label </span><span style="background-color: #f5f5f5; color: #000000;">%&gt;&lt;</span><span style="background-color: #f5f5f5; color: #000000;">/</span><span style="background-color: #f5f5f5; color: #000000;">label&gt;</span>
<span style="color: #008080;">10</span>         <span style="background-color: #f5f5f5; color: #000000;">&lt;</span><span style="background-color: #f5f5f5; color: #000000;">input type</span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">text</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;"> id</span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">search_input</span><span style="background-color: #f5f5f5; color: #000000;">"</span> <span style="background-color: #f5f5f5; color: #000000;">/</span><span style="background-color: #f5f5f5; color: #000000;">&gt;</span>
<span style="color: #008080;">11</span>         <span style="background-color: #f5f5f5; color: #000000;">&lt;</span><span style="background-color: #f5f5f5; color: #000000;">input type</span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">button</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;"> id</span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">search_button</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;"> value</span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">Search</span><span style="background-color: #f5f5f5; color: #000000;">"</span> <span style="background-color: #f5f5f5; color: #000000;">/</span><span style="background-color: #f5f5f5; color: #000000;">&gt;</span>
<span style="color: #008080;">12</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">13</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">14</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="js/jquery.js"</span><span style="color: #ff0000;"> type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">15</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="js/underscore.js"</span><span style="color: #ff0000;"> type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">16</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="js/backbone.js"</span><span style="color: #ff0000;"> type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">17</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">18</span> <span style="background-color: #f5f5f5; color: #000000;">    (</span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> ($) {
</span><span style="color: #008080;">19</span> <span style="background-color: #f5f5f5; color: #000000;">        SearchView </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> Backbone.View.extend({
</span><span style="color: #008080;">20</span> <span style="background-color: #f5f5f5; color: #000000;">            initialize: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> () {
</span><span style="color: #008080;">21</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.render(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">the5fire</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">);
</span><span style="color: #008080;">22</span> <span style="background-color: #f5f5f5; color: #000000;">            },
</span><span style="color: #008080;">23</span> <span style="background-color: #f5f5f5; color: #000000;">            render: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> (search_label) {
</span><span style="color: #008080;">24</span>                 <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">使用underscore这个库，来编译模板</span>
<span style="color: #008080;">25</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> template </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> _.template($(</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">#search_template</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">).html(), { search_label: search_label });
</span><span style="color: #008080;">26</span>                 <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">加载模板到对应的el属性中</span>
<span style="color: #008080;">27</span> <span style="background-color: #f5f5f5; color: #000000;">                $(</span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.el).html(template);
</span><span style="color: #008080;">28</span> <span style="background-color: #f5f5f5; color: #000000;">            },
</span><span style="color: #008080;">29</span> <span style="background-color: #f5f5f5; color: #000000;">            events: {  </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">就是在这里绑定的</span>
<span style="color: #008080;">30</span>                 <span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">click input[type=button]</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">: </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">doChange</span><span style="background-color: #f5f5f5; color: #000000;">'</span>
<span style="color: #008080;">31</span> <span style="background-color: #f5f5f5; color: #000000;">            },
</span><span style="color: #008080;">32</span> <span style="background-color: #f5f5f5; color: #000000;">            doChange: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> (event) {
</span><span style="color: #008080;">33</span>                 <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">通过model发送数据到服务器</span>
<span style="color: #008080;">34</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.render(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">the5fire</span><span style="background-color: #f5f5f5; color: #000000;">'</span> <span style="background-color: #f5f5f5; color: #000000;">+</span><span style="background-color: #f5f5f5; color: #000000;"> $(</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">#search_input</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">).val());
</span><span style="color: #008080;">35</span> <span style="background-color: #f5f5f5; color: #000000;">            }
</span><span style="color: #008080;">36</span> <span style="background-color: #f5f5f5; color: #000000;">        });
</span><span style="color: #008080;">37</span>         <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> searchView </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">new</span><span style="background-color: #f5f5f5; color: #000000;"> SearchView({ el: $(</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">#search_container</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">) });
</span><span style="color: #008080;">38</span> <span style="background-color: #f5f5f5; color: #000000;">    })(jQuery);
</span><span style="color: #008080;">39</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">40</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">html</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<h2>阶段总结</h2>
<p>好了，知识回顾暂时到这里，我们要来我们的东西了，不然搞不完了。</p>
<h1>HTML结构</h1>
<p>有点一头雾水的感觉，于是先上一张图吧：</p>
<p><img src="36287848782262.png" alt=""></p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">html </span><span style="color: #ff0000;">xmlns</span><span style="color: #0000ff;">="http://www.w3.org/1999/xhtml"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 2</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 3</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 4</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 5</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 6</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="contactapp"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 7</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">header</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 8</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">h1</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 9</span>                 通讯录<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">h1</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">10</span>         <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">header</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">11</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">section </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="main"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">12</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">ul </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="contact-list"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">13</span>             <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">ul</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">14</span>         <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">section</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">15</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="create"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">16</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">label</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">17</span>                 姓名：<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="text"</span><span style="color: #ff0000;"> id</span><span style="color: #0000ff;">="name"</span> <span style="color: #0000ff;">/&gt;&lt;/</span><span style="color: #800000;">label</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">18</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">label</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">19</span>                 电话：<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="text"</span><span style="color: #ff0000;"> id</span><span style="color: #0000ff;">="phone"</span> <span style="color: #0000ff;">/&gt;&lt;/</span><span style="color: #800000;">label</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">20</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="button"</span><span style="color: #ff0000;"> value</span><span style="color: #0000ff;">="保存"</span><span style="color: #ff0000;"> id</span><span style="color: #0000ff;">="add"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">21</span>         <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">22</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">23</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">24</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">html</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p><img src="27528709973844.png" alt=""></p>
<p>下面的输入框用以新建通讯项目，contact-list用以显示通讯录列表。整个页面非常简单，我们先就完成这个功能即可。</p>
<h1>模型与集合</h1>
<p>完了我们应该创建Contact模型了，我们先来随便写写代码看看有神马情况发生：</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">var</span> Contact =<span style="color: #000000;"> Backbone.Model.extend({
    validate: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> (attr) {
        </span><span style="color: #0000ff;">if</span> (!attr.name || attr.name.length &gt; 5<span style="color: #000000;">) {
            </span><span style="color: #0000ff;">return</span> '姓名格式错误'<span style="color: #000000;">;
        }
    }
});
</span><span style="color: #0000ff;">var</span> contact = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Contact();
</span><span style="color: #0000ff;">var</span> s = '';</pre>
</div>
<p>这里根据backbone的Model的extend方法建立了Contact模型。</p>
<p>其中可能会有验证机制，我这里随便写了一个，电话其实也需要验证的。</p>
<p>而模型会有的方法，我们暂时不管他了，先来个集合吧：</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="js/underscore.js"</span><span style="color: #ff0000;"> type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="js/backbone.js"</span><span style="color: #ff0000;"> type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="js/backbone.localStorage.js"</span><span style="color: #ff0000;"> type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;</span>
<span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> Contact </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> Backbone.Model.extend({
    validate: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> (attr) {
        </span><span style="background-color: #f5f5f5; color: #0000ff;">if</span><span style="background-color: #f5f5f5; color: #000000;"> (</span><span style="background-color: #f5f5f5; color: #000000;">!</span><span style="background-color: #f5f5f5; color: #000000;">attr.name </span><span style="background-color: #f5f5f5; color: #000000;">||</span><span style="background-color: #f5f5f5; color: #000000;"> attr.name.length </span><span style="background-color: #f5f5f5; color: #000000;">&gt;</span> <span style="background-color: #f5f5f5; color: #000000;">5</span><span style="background-color: #f5f5f5; color: #000000;">) {
            </span><span style="background-color: #f5f5f5; color: #0000ff;">return</span> <span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">姓名格式错误</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">;
        }
    }
});

</span><span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> ContackList </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> Backbone.Collection.extend({
    model: ContackList,
    localStorage: </span><span style="background-color: #f5f5f5; color: #0000ff;">new</span><span style="background-color: #f5f5f5; color: #000000;"> Store(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">contacts</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">)</span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">所有信息保存至contacts空间下，注意此次用到了本地存储的东西</span>
<span style="background-color: #f5f5f5; color: #000000;">});
</span><span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> s </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #000000;">''</span><span style="background-color: #f5f5f5; color: #000000;">;
</span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p>这里使用了本地存储，所以我们必须设置localStorage属性。</p>
<h1>视图</h1>
<p>现在我们来设置视图后：</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">html </span><span style="color: #ff0000;">xmlns</span><span style="color: #0000ff;">="http://www.w3.org/1999/xhtml"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 2</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 3</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 4</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 5</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 6</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="contactapp"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 7</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">header</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 8</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">h1</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 9</span>                 通讯录<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">h1</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">10</span>         <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">header</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">11</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">section </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="main"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">12</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">ul </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="contact-list"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">13</span>             <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">ul</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">14</span>         <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">section</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">15</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="create"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">16</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">label</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">17</span>                 姓名：<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="text"</span><span style="color: #ff0000;"> id</span><span style="color: #0000ff;">="name"</span> <span style="color: #0000ff;">/&gt;&lt;/</span><span style="color: #800000;">label</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">18</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">label</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">19</span>                 电话：<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="text"</span><span style="color: #ff0000;"> id</span><span style="color: #0000ff;">="phone"</span> <span style="color: #0000ff;">/&gt;&lt;/</span><span style="color: #800000;">label</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">20</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="button"</span><span style="color: #ff0000;"> value</span><span style="color: #0000ff;">="保存"</span><span style="color: #ff0000;"> id</span><span style="color: #0000ff;">="add"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">21</span>         <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">22</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">23</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">24</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="js/jquery.js"</span><span style="color: #ff0000;"> type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">25</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="js/underscore.js"</span><span style="color: #ff0000;"> type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">26</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="js/backbone.js"</span><span style="color: #ff0000;"> type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">27</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="js/backbone.localStorage.js"</span><span style="color: #ff0000;"> type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">28</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">29</span> <span style="background-color: #f5f5f5; color: #000000;">    (</span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> ($) {
</span><span style="color: #008080;">30</span>         <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> Contact </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> Backbone.Model.extend({
</span><span style="color: #008080;">31</span> <span style="background-color: #f5f5f5; color: #000000;">            validate: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> (attr) {
</span><span style="color: #008080;">32</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">if</span><span style="background-color: #f5f5f5; color: #000000;"> (</span><span style="background-color: #f5f5f5; color: #000000;">!</span><span style="background-color: #f5f5f5; color: #000000;">attr.name </span><span style="background-color: #f5f5f5; color: #000000;">||</span><span style="background-color: #f5f5f5; color: #000000;"> attr.name.length </span><span style="background-color: #f5f5f5; color: #000000;">&gt;</span> <span style="background-color: #f5f5f5; color: #000000;">5</span><span style="background-color: #f5f5f5; color: #000000;">) {
</span><span style="color: #008080;">33</span>                     <span style="background-color: #f5f5f5; color: #0000ff;">return</span> <span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">姓名格式错误</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">;
</span><span style="color: #008080;">34</span> <span style="background-color: #f5f5f5; color: #000000;">                }
</span><span style="color: #008080;">35</span> <span style="background-color: #f5f5f5; color: #000000;">            }
</span><span style="color: #008080;">36</span> <span style="background-color: #f5f5f5; color: #000000;">        });
</span><span style="color: #008080;">37</span> 
<span style="color: #008080;">38</span>         <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> ContackList </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> Backbone.Collection.extend({
</span><span style="color: #008080;">39</span> <span style="background-color: #f5f5f5; color: #000000;">            model: ContackList,
</span><span style="color: #008080;">40</span> <span style="background-color: #f5f5f5; color: #000000;">            localStorage: </span><span style="background-color: #f5f5f5; color: #0000ff;">new</span><span style="background-color: #f5f5f5; color: #000000;"> Store(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">contacts</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">), </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">所有信息保存至contacts空间下，注意此次用到了本地存储的东西</span>
<span style="color: #008080;">41</span> <span style="background-color: #f5f5f5; color: #000000;">            initialize: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> (models, options) {
</span><span style="color: #008080;">42</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.bind(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">add</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">, options.view.add);
</span><span style="color: #008080;">43</span> <span style="background-color: #f5f5f5; color: #000000;">            }
</span><span style="color: #008080;">44</span> <span style="background-color: #f5f5f5; color: #000000;">        });
</span><span style="color: #008080;">45</span>         <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> AppView </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> Backbone.View.extend({
</span><span style="color: #008080;">46</span> <span style="background-color: #f5f5f5; color: #000000;">            el: $(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">body</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">),
</span><span style="color: #008080;">47</span> <span style="background-color: #f5f5f5; color: #000000;">            tmplate: _.template(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">&lt;li&gt;&lt;%= name %&gt;：&lt;%= phone %&gt;&lt;/li&gt;</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">),
</span><span style="color: #008080;">48</span> 
<span style="color: #008080;">49</span> <span style="background-color: #f5f5f5; color: #000000;">            initialize: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> () {
</span><span style="color: #008080;">50</span> <span style="background-color: #f5f5f5; color: #000000;">                _.bindAll(</span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">, </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">save</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">, </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">add</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">);
</span><span style="color: #008080;">51</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.contacts </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">new</span><span style="background-color: #f5f5f5; color: #000000;"> ContackList(</span><span style="background-color: #f5f5f5; color: #0000ff;">null</span><span style="background-color: #f5f5f5; color: #000000;">, { view: </span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;"> });
</span><span style="color: #008080;">52</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.list </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> $(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">#contact-list</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">);
</span><span style="color: #008080;">53</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.name </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> $(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">#name</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">);
</span><span style="color: #008080;">54</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.phone </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> $(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">#phone</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">);
</span><span style="color: #008080;">55</span> <span style="background-color: #f5f5f5; color: #000000;">            },
</span><span style="color: #008080;">56</span> <span style="background-color: #f5f5f5; color: #000000;">            events: {
</span><span style="color: #008080;">57</span>                 <span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">click #add</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">: </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">save</span><span style="background-color: #f5f5f5; color: #000000;">'</span>
<span style="color: #008080;">58</span> <span style="background-color: #f5f5f5; color: #000000;">            },
</span><span style="color: #008080;">59</span> <span style="background-color: #f5f5f5; color: #000000;">            save: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> () {
</span><span style="color: #008080;">60</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> model </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">new</span><span style="background-color: #f5f5f5; color: #000000;"> Contact({ name: </span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.name.val(), phone: </span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.phone.val() });
</span><span style="color: #008080;">61</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.contacts.add(model);
</span><span style="color: #008080;">62</span> <span style="background-color: #f5f5f5; color: #000000;">            },
</span><span style="color: #008080;">63</span> <span style="background-color: #f5f5f5; color: #000000;">            add: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> (model) {
</span><span style="color: #008080;">64</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> obj </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> model.toJSON();
</span><span style="color: #008080;">65</span> <span style="background-color: #f5f5f5; color: #000000;">                $(</span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.list).append(</span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.tmplate(obj));
</span><span style="color: #008080;">66</span> <span style="background-color: #f5f5f5; color: #000000;">            }
</span><span style="color: #008080;">67</span> <span style="background-color: #f5f5f5; color: #000000;">        });
</span><span style="color: #008080;">68</span>         <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> app </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">new</span><span style="background-color: #f5f5f5; color: #000000;"> AppView();
</span><span style="color: #008080;">69</span> 
<span style="color: #008080;">70</span> <span style="background-color: #f5f5f5; color: #000000;">    })(jQuery);
</span><span style="color: #008080;">71</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">72</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">html</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p><img src="37466926719001.png" alt=""></p>
<p>我们的简单的界面终于出来了。。。。于是我们来优化加功能吧：</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;">  1</span> <span style="color: #0000ff;">&lt;!</span><span style="color: #ff00ff;">DOCTYPE html</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">  2</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">html </span><span style="color: #ff0000;">xmlns</span><span style="color: #0000ff;">="http://www.w3.org/1999/xhtml"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">  3</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">  4</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">  5</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">  6</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">  7</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="contactapp"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">  8</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">header</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">  9</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">h1</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 10</span>                 通讯录<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">h1</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 11</span>         <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">header</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 12</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">section </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="main"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 13</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">ul </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="contact-list"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 14</span>             <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">ul</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 15</span>         <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">section</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 16</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="create"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 17</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">label</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 18</span>                 姓名：<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="text"</span><span style="color: #ff0000;"> id</span><span style="color: #0000ff;">="name"</span> <span style="color: #0000ff;">/&gt;&lt;/</span><span style="color: #800000;">label</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 19</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">label</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 20</span>                 电话：<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="text"</span><span style="color: #ff0000;"> id</span><span style="color: #0000ff;">="phone"</span> <span style="color: #0000ff;">/&gt;&lt;/</span><span style="color: #800000;">label</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 21</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="button"</span><span style="color: #ff0000;"> value</span><span style="color: #0000ff;">="保存"</span><span style="color: #ff0000;"> id</span><span style="color: #0000ff;">="add"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;"> 22</span>         <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 23</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 24</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 25</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="js/jquery.js"</span><span style="color: #ff0000;"> type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 26</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="js/underscore.js"</span><span style="color: #ff0000;"> type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 27</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="js/backbone.js"</span><span style="color: #ff0000;"> type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 28</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="js/backbone.localStorage.js"</span><span style="color: #ff0000;"> type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 29</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 30</span> <span style="background-color: #f5f5f5; color: #000000;">    (</span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> ($) {
</span><span style="color: #008080;"> 31</span>         <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> Contact </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> Backbone.Model.extend({
</span><span style="color: #008080;"> 32</span> <span style="background-color: #f5f5f5; color: #000000;">            initialize: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> () {
</span><span style="color: #008080;"> 33</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.bind(</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">error</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">, </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> (model, error) {
</span><span style="color: #008080;"> 34</span> <span style="background-color: #f5f5f5; color: #000000;">                    alert(error);
</span><span style="color: #008080;"> 35</span> <span style="background-color: #f5f5f5; color: #000000;">                });
</span><span style="color: #008080;"> 36</span> <span style="background-color: #f5f5f5; color: #000000;">            },
</span><span style="color: #008080;"> 37</span> <span style="background-color: #f5f5f5; color: #000000;">            validate: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> (attr) {
</span><span style="color: #008080;"> 38</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">if</span><span style="background-color: #f5f5f5; color: #000000;"> (attr.name.length </span><span style="background-color: #f5f5f5; color: #000000;">==</span> <span style="background-color: #f5f5f5; color: #000000;">''</span><span style="background-color: #f5f5f5; color: #000000;">) {
</span><span style="color: #008080;"> 39</span>                     <span style="background-color: #f5f5f5; color: #0000ff;">return</span> <span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">姓名格式错误</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">;
</span><span style="color: #008080;"> 40</span> <span style="background-color: #f5f5f5; color: #000000;">                }
</span><span style="color: #008080;"> 41</span> <span style="background-color: #f5f5f5; color: #000000;">            }
</span><span style="color: #008080;"> 42</span> <span style="background-color: #f5f5f5; color: #000000;">        });
</span><span style="color: #008080;"> 43</span>         <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> ContactList </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> Backbone.Collection.extend({
</span><span style="color: #008080;"> 44</span> <span style="background-color: #f5f5f5; color: #000000;">            model: Contact,
</span><span style="color: #008080;"> 45</span> <span style="background-color: #f5f5f5; color: #000000;">            localStorage: </span><span style="background-color: #f5f5f5; color: #0000ff;">new</span><span style="background-color: #f5f5f5; color: #000000;"> Store(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">contacts</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">) </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">所有信息保存至contacts空间下，注意此次用到了本地存储的东西</span>
<span style="color: #008080;"> 46</span> 
<span style="color: #008080;"> 47</span> <span style="background-color: #f5f5f5; color: #000000;">        });
</span><span style="color: #008080;"> 48</span>         <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> list </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">new</span><span style="background-color: #f5f5f5; color: #000000;"> ContactList();
</span><span style="color: #008080;"> 49</span>         <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> ContactView </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> Backbone.View.extend({
</span><span style="color: #008080;"> 50</span> <span style="background-color: #f5f5f5; color: #000000;">            tagName: </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">li</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">,
</span><span style="color: #008080;"> 51</span> <span style="background-color: #f5f5f5; color: #000000;">            template: _.template(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">&lt;div&gt;&lt;%= name %&gt;：&lt;%= phone %&gt;&lt;/div&gt;</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">),
</span><span style="color: #008080;"> 52</span> <span style="background-color: #f5f5f5; color: #000000;">            events: {
</span><span style="color: #008080;"> 53</span>                 <span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">click li</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">: </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">test</span><span style="background-color: #f5f5f5; color: #000000;">'</span>
<span style="color: #008080;"> 54</span> <span style="background-color: #f5f5f5; color: #000000;">            },
</span><span style="color: #008080;"> 55</span> <span style="background-color: #f5f5f5; color: #000000;">            initialize: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> () {
</span><span style="color: #008080;"> 56</span> <span style="background-color: #f5f5f5; color: #000000;">                _.bindAll(</span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">, </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">render</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">, </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">remove</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">);
</span><span style="color: #008080;"> 57</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.model.bind(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">change</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">, </span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.render);
</span><span style="color: #008080;"> 58</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.model.bind(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">destroy</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">, </span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.remove);
</span><span style="color: #008080;"> 59</span> <span style="background-color: #f5f5f5; color: #000000;">            },
</span><span style="color: #008080;"> 60</span> <span style="background-color: #f5f5f5; color: #000000;">            render: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> () {
</span><span style="color: #008080;"> 61</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> html </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.template(</span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.model.toJSON());
</span><span style="color: #008080;"> 62</span>                 <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">this.el是生成的空div</span>
<span style="color: #008080;"> 63</span> <span style="background-color: #f5f5f5; color: #000000;">                $(</span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.el).html(html);
</span><span style="color: #008080;"> 64</span>                 <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">返回了当前视图</span>
<span style="color: #008080;"> 65</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">return</span> <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">;
</span><span style="color: #008080;"> 66</span> <span style="background-color: #f5f5f5; color: #000000;">            },
</span><span style="color: #008080;"> 67</span> <span style="background-color: #f5f5f5; color: #000000;">            remove: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> () {
</span><span style="color: #008080;"> 68</span> <span style="background-color: #f5f5f5; color: #000000;">                $(</span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.el).remove();
</span><span style="color: #008080;"> 69</span> <span style="background-color: #f5f5f5; color: #000000;">            },
</span><span style="color: #008080;"> 70</span> <span style="background-color: #f5f5f5; color: #000000;">            test: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> () {
</span><span style="color: #008080;"> 71</span> <span style="background-color: #f5f5f5; color: #000000;">                alert(</span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">);
</span><span style="color: #008080;"> 72</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> s </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #000000;">''</span><span style="background-color: #f5f5f5; color: #000000;">;
</span><span style="color: #008080;"> 73</span> <span style="background-color: #f5f5f5; color: #000000;">            }
</span><span style="color: #008080;"> 74</span> <span style="background-color: #f5f5f5; color: #000000;">        });
</span><span style="color: #008080;"> 75</span>         <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> AppView </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> Backbone.View.extend({
</span><span style="color: #008080;"> 76</span> <span style="background-color: #f5f5f5; color: #000000;">            el: $(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">body</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">),
</span><span style="color: #008080;"> 77</span> <span style="background-color: #f5f5f5; color: #000000;">            events: {
</span><span style="color: #008080;"> 78</span>                 <span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">click #add</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">: </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">save</span><span style="background-color: #f5f5f5; color: #000000;">'</span>
<span style="color: #008080;"> 79</span> <span style="background-color: #f5f5f5; color: #000000;">            },
</span><span style="color: #008080;"> 80</span> <span style="background-color: #f5f5f5; color: #000000;">            initialize: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> () {
</span><span style="color: #008080;"> 81</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.name </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.$(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">#name</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">);
</span><span style="color: #008080;"> 82</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.phone </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.$(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">#phone</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">);
</span><span style="color: #008080;"> 83</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.list </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.$(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">#contact-list</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">);
</span><span style="color: #008080;"> 84</span> 
<span style="color: #008080;"> 85</span> <span style="background-color: #f5f5f5; color: #000000;">                _.bindAll(</span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">, </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">render</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">, </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">add</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">, </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">loadList</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">, </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">save</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">);
</span><span style="color: #008080;"> 86</span>                 <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">为集合绑定事件</span>
<span style="color: #008080;"> 87</span> <span style="background-color: #f5f5f5; color: #000000;">                list.bind(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">add</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">, </span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.add);
</span><span style="color: #008080;"> 88</span>                 <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">添加修改时触发</span>
<span style="color: #008080;"> 89</span> <span style="background-color: #f5f5f5; color: #000000;">                list.bind(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">refresh</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">, </span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.loadList);
</span><span style="color: #008080;"> 90</span> <span style="background-color: #f5f5f5; color: #000000;">                list.fetch();
</span><span style="color: #008080;"> 91</span> <span style="background-color: #f5f5f5; color: #000000;">            },
</span><span style="color: #008080;"> 92</span>             <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">添加项目</span>
<span style="color: #008080;"> 93</span> <span style="background-color: #f5f5f5; color: #000000;">            add: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> (model) {
</span><span style="color: #008080;"> 94</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> view </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">new</span><span style="background-color: #f5f5f5; color: #000000;"> ContactView({ model: model });
</span><span style="color: #008080;"> 95</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.list.append(view.render().el);
</span><span style="color: #008080;"> 96</span> <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">                view.model.save({ name: model.name, phone: model.phone });</span>
<span style="color: #008080;"> 97</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> s </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #000000;">''</span><span style="background-color: #f5f5f5; color: #000000;">;
</span><span style="color: #008080;"> 98</span> <span style="background-color: #f5f5f5; color: #000000;">            },
</span><span style="color: #008080;"> 99</span> <span style="background-color: #f5f5f5; color: #000000;">            loadList: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> () {
</span><span style="color: #008080;">100</span> <span style="background-color: #f5f5f5; color: #000000;">                list.each(</span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.add);
</span><span style="color: #008080;">101</span> <span style="background-color: #f5f5f5; color: #000000;">            },
</span><span style="color: #008080;">102</span> <span style="background-color: #f5f5f5; color: #000000;">            save: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> () {
</span><span style="color: #008080;">103</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> name </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.name.val();
</span><span style="color: #008080;">104</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> phone </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.phone.val();
</span><span style="color: #008080;">105</span> <span style="background-color: #f5f5f5; color: #000000;">                list.create({ name: name, phone: phone });
</span><span style="color: #008080;">106</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.name.val(</span><span style="background-color: #f5f5f5; color: #000000;">''</span><span style="background-color: #f5f5f5; color: #000000;">);
</span><span style="color: #008080;">107</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.phone.val(</span><span style="background-color: #f5f5f5; color: #000000;">''</span><span style="background-color: #f5f5f5; color: #000000;">);
</span><span style="color: #008080;">108</span> <span style="background-color: #f5f5f5; color: #000000;">            }
</span><span style="color: #008080;">109</span> <span style="background-color: #f5f5f5; color: #000000;">        });
</span><span style="color: #008080;">110</span>         <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> app </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">new</span><span style="background-color: #f5f5f5; color: #000000;"> AppView();
</span><span style="color: #008080;">111</span> 
<span style="color: #008080;">112</span> <span style="background-color: #f5f5f5; color: #000000;">    })(jQuery);
</span><span style="color: #008080;">113</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">114</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">html</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p><img src="18272599082397.png" alt=""></p>
<p><img src="22023638547680.png" alt=""></p>
<p>这个代码与上述代码有些不同，我们来理一理：</p>
<p>① 模型与集合变化不大</p>
<p>② 具有2个视图：</p>
<p>通讯录视图，我们后面通讯录会有编辑、删除或者其他功能，就在此上写</p>
<p>全局视图，AppView用于全局，可能还会显示整体状态。</p>
<p>③流程</p>
<p>因为我们只有一个通讯录列表，所以将之全局化出来了：</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">var</span> list = <span style="color: #0000ff;">new</span> ContactList();</pre>
</div>
<p>ContactView主要关注自身，与整体可以隔离开。</p>
<p>tagName指定了形成的dom的外层结构，不指定就是div</p>
<p>template会解析模板，我直接写到这里了，后面我们做点修改给个删除功能</p>
<div class="cnblogs_code">
<pre>template: _.template('&lt;div&gt;&lt;%= name %&gt;：&lt;%= phone %&gt;&lt;a href="javascript:;"&gt;[删除]&lt;/a&gt;&lt;/div&gt;'),</pre>
</div>
<p>events就是绑定的事件</p>
<p>PS：具体代码各位自己看吧......</p>
<p>这里将删除事件加上就算阶段完成了：</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('96a81e12-45a0-4c4d-b9f6-8d545a3fcb48')"><img id="code_img_closed_96a81e12-45a0-4c4d-b9f6-8d545a3fcb48" class="code_img_closed" src="43570758473519.gif" alt=""><img id="code_img_opened_96a81e12-45a0-4c4d-b9f6-8d545a3fcb48" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('96a81e12-45a0-4c4d-b9f6-8d545a3fcb48',event)" src="16365178109279.gif" alt="">
<div id="cnblogs_code_open_96a81e12-45a0-4c4d-b9f6-8d545a3fcb48" class="cnblogs_code_hide">
<pre><span style="color: #008080;">  1</span> <span style="color: #0000ff;">&lt;!</span><span style="color: #ff00ff;">DOCTYPE html</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">  2</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">html </span><span style="color: #ff0000;">xmlns</span><span style="color: #0000ff;">="http://www.w3.org/1999/xhtml"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">  3</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">  4</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">  5</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">  6</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">  7</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="contactapp"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">  8</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">header</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">  9</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">h1</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 10</span>                 通讯录<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">h1</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 11</span>         <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">header</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 12</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">section </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="main"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 13</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">ul </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="contact-list"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 14</span>             <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">ul</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 15</span>         <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">section</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 16</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="create"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 17</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">label</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 18</span>                 姓名：<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="text"</span><span style="color: #ff0000;"> id</span><span style="color: #0000ff;">="name"</span> <span style="color: #0000ff;">/&gt;&lt;/</span><span style="color: #800000;">label</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 19</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">label</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 20</span>                 电话：<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="text"</span><span style="color: #ff0000;"> id</span><span style="color: #0000ff;">="phone"</span> <span style="color: #0000ff;">/&gt;&lt;/</span><span style="color: #800000;">label</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 21</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="button"</span><span style="color: #ff0000;"> value</span><span style="color: #0000ff;">="保存"</span><span style="color: #ff0000;"> id</span><span style="color: #0000ff;">="add"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;"> 22</span>         <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 23</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 24</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 25</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="js/jquery.js"</span><span style="color: #ff0000;"> type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 26</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="js/underscore.js"</span><span style="color: #ff0000;"> type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 27</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="js/backbone.js"</span><span style="color: #ff0000;"> type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 28</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="js/backbone.localStorage.js"</span><span style="color: #ff0000;"> type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 29</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 30</span> <span style="background-color: #f5f5f5; color: #000000;">    (</span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> ($) {
</span><span style="color: #008080;"> 31</span>         <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> Contact </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> Backbone.Model.extend({
</span><span style="color: #008080;"> 32</span> <span style="background-color: #f5f5f5; color: #000000;">            initialize: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> () {
</span><span style="color: #008080;"> 33</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.bind(</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">error</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">, </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> (model, error) {
</span><span style="color: #008080;"> 34</span> <span style="background-color: #f5f5f5; color: #000000;">                    alert(error);
</span><span style="color: #008080;"> 35</span> <span style="background-color: #f5f5f5; color: #000000;">                });
</span><span style="color: #008080;"> 36</span> <span style="background-color: #f5f5f5; color: #000000;">            },
</span><span style="color: #008080;"> 37</span> <span style="background-color: #f5f5f5; color: #000000;">            validate: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> (attr) {
</span><span style="color: #008080;"> 38</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">if</span><span style="background-color: #f5f5f5; color: #000000;"> (attr.name.length </span><span style="background-color: #f5f5f5; color: #000000;">==</span> <span style="background-color: #f5f5f5; color: #000000;">''</span><span style="background-color: #f5f5f5; color: #000000;">) {
</span><span style="color: #008080;"> 39</span>                     <span style="background-color: #f5f5f5; color: #0000ff;">return</span> <span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">姓名格式错误</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">;
</span><span style="color: #008080;"> 40</span> <span style="background-color: #f5f5f5; color: #000000;">                }
</span><span style="color: #008080;"> 41</span> <span style="background-color: #f5f5f5; color: #000000;">            }
</span><span style="color: #008080;"> 42</span> <span style="background-color: #f5f5f5; color: #000000;">        });
</span><span style="color: #008080;"> 43</span>         <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> ContactList </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> Backbone.Collection.extend({
</span><span style="color: #008080;"> 44</span> <span style="background-color: #f5f5f5; color: #000000;">            model: Contact,
</span><span style="color: #008080;"> 45</span> <span style="background-color: #f5f5f5; color: #000000;">            localStorage: </span><span style="background-color: #f5f5f5; color: #0000ff;">new</span><span style="background-color: #f5f5f5; color: #000000;"> Store(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">contacts</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">) </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">所有信息保存至contacts空间下，注意此次用到了本地存储的东西</span>
<span style="color: #008080;"> 46</span> 
<span style="color: #008080;"> 47</span> <span style="background-color: #f5f5f5; color: #000000;">        });
</span><span style="color: #008080;"> 48</span>         <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> list </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">new</span><span style="background-color: #f5f5f5; color: #000000;"> ContactList();
</span><span style="color: #008080;"> 49</span>         <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> ContactView </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> Backbone.View.extend({
</span><span style="color: #008080;"> 50</span> <span style="background-color: #f5f5f5; color: #000000;">            tagName: </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">li</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">,
</span><span style="color: #008080;"> 51</span> <span style="background-color: #f5f5f5; color: #000000;">            template: _.template(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">&lt;div&gt;&lt;%= name %&gt;：&lt;%= phone %&gt;&lt;a href="javascript:;" class="delete"&gt;[删除]&lt;/a&gt;&lt;/div&gt;</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">),
</span><span style="color: #008080;"> 52</span> <span style="background-color: #f5f5f5; color: #000000;">            events: {
</span><span style="color: #008080;"> 53</span>                 <span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">click .delete</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">: </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">destroy</span><span style="background-color: #f5f5f5; color: #000000;">'</span>
<span style="color: #008080;"> 54</span> <span style="background-color: #f5f5f5; color: #000000;">            },
</span><span style="color: #008080;"> 55</span> <span style="background-color: #f5f5f5; color: #000000;">            initialize: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> () {
</span><span style="color: #008080;"> 56</span> <span style="background-color: #f5f5f5; color: #000000;">                _.bindAll(</span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">, </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">render</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">, </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">remove</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">);
</span><span style="color: #008080;"> 57</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.model.bind(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">change</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">, </span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.render);
</span><span style="color: #008080;"> 58</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.model.bind(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">destroy</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">, </span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.remove);
</span><span style="color: #008080;"> 59</span> <span style="background-color: #f5f5f5; color: #000000;">            },
</span><span style="color: #008080;"> 60</span> <span style="background-color: #f5f5f5; color: #000000;">            render: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> () {
</span><span style="color: #008080;"> 61</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> html </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.template(</span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.model.toJSON());
</span><span style="color: #008080;"> 62</span>                 <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">this.el是生成的空div</span>
<span style="color: #008080;"> 63</span> <span style="background-color: #f5f5f5; color: #000000;">                $(</span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.el).html(html);
</span><span style="color: #008080;"> 64</span>                 <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">返回了当前视图</span>
<span style="color: #008080;"> 65</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">return</span> <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">;
</span><span style="color: #008080;"> 66</span> <span style="background-color: #f5f5f5; color: #000000;">            },
</span><span style="color: #008080;"> 67</span> <span style="background-color: #f5f5f5; color: #000000;">            destroy: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> () {
</span><span style="color: #008080;"> 68</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.model.destroy();
</span><span style="color: #008080;"> 69</span> <span style="background-color: #f5f5f5; color: #000000;">            },
</span><span style="color: #008080;"> 70</span> <span style="background-color: #f5f5f5; color: #000000;">            remove: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> () {
</span><span style="color: #008080;"> 71</span> <span style="background-color: #f5f5f5; color: #000000;">                $(</span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.el).remove();
</span><span style="color: #008080;"> 72</span> 
<span style="color: #008080;"> 73</span> <span style="background-color: #f5f5f5; color: #000000;">            }
</span><span style="color: #008080;"> 74</span> <span style="background-color: #f5f5f5; color: #000000;">        });
</span><span style="color: #008080;"> 75</span>         <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> AppView </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> Backbone.View.extend({
</span><span style="color: #008080;"> 76</span> <span style="background-color: #f5f5f5; color: #000000;">            el: $(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">body</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">),
</span><span style="color: #008080;"> 77</span> <span style="background-color: #f5f5f5; color: #000000;">            events: {
</span><span style="color: #008080;"> 78</span>                 <span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">click #add</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">: </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">save</span><span style="background-color: #f5f5f5; color: #000000;">'</span>
<span style="color: #008080;"> 79</span> <span style="background-color: #f5f5f5; color: #000000;">            },
</span><span style="color: #008080;"> 80</span> <span style="background-color: #f5f5f5; color: #000000;">            initialize: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> () {
</span><span style="color: #008080;"> 81</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.name </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.$(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">#name</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">);
</span><span style="color: #008080;"> 82</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.phone </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.$(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">#phone</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">);
</span><span style="color: #008080;"> 83</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.list </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.$(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">#contact-list</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">);
</span><span style="color: #008080;"> 84</span> 
<span style="color: #008080;"> 85</span> <span style="background-color: #f5f5f5; color: #000000;">                _.bindAll(</span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">, </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">render</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">, </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">add</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">, </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">loadList</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">, </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">save</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">);
</span><span style="color: #008080;"> 86</span>                 <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">为集合绑定事件</span>
<span style="color: #008080;"> 87</span> <span style="background-color: #f5f5f5; color: #000000;">                list.bind(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">add</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">, </span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.add);
</span><span style="color: #008080;"> 88</span>                 <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">添加修改时触发</span>
<span style="color: #008080;"> 89</span> <span style="background-color: #f5f5f5; color: #000000;">                list.bind(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">refresh</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">, </span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.loadList);
</span><span style="color: #008080;"> 90</span> <span style="background-color: #f5f5f5; color: #000000;">                list.fetch();
</span><span style="color: #008080;"> 91</span> <span style="background-color: #f5f5f5; color: #000000;">            },
</span><span style="color: #008080;"> 92</span>             <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">添加项目</span>
<span style="color: #008080;"> 93</span> <span style="background-color: #f5f5f5; color: #000000;">            add: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> (model) {
</span><span style="color: #008080;"> 94</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> view </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">new</span><span style="background-color: #f5f5f5; color: #000000;"> ContactView({ model: model });
</span><span style="color: #008080;"> 95</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.list.append(view.render().el);
</span><span style="color: #008080;"> 96</span>                 <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">                view.model.save({ name: model.name, phone: model.phone });</span>
<span style="color: #008080;"> 97</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> s </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #000000;">''</span><span style="background-color: #f5f5f5; color: #000000;">;
</span><span style="color: #008080;"> 98</span> <span style="background-color: #f5f5f5; color: #000000;">            },
</span><span style="color: #008080;"> 99</span> <span style="background-color: #f5f5f5; color: #000000;">            loadList: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> () {
</span><span style="color: #008080;">100</span> <span style="background-color: #f5f5f5; color: #000000;">                list.each(</span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.add);
</span><span style="color: #008080;">101</span> <span style="background-color: #f5f5f5; color: #000000;">            },
</span><span style="color: #008080;">102</span> <span style="background-color: #f5f5f5; color: #000000;">            save: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> () {
</span><span style="color: #008080;">103</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> name </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.name.val();
</span><span style="color: #008080;">104</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> phone </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.phone.val();
</span><span style="color: #008080;">105</span> <span style="background-color: #f5f5f5; color: #000000;">                list.create({ name: name, phone: phone });
</span><span style="color: #008080;">106</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.name.val(</span><span style="background-color: #f5f5f5; color: #000000;">''</span><span style="background-color: #f5f5f5; color: #000000;">);
</span><span style="color: #008080;">107</span>                 <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.phone.val(</span><span style="background-color: #f5f5f5; color: #000000;">''</span><span style="background-color: #f5f5f5; color: #000000;">);
</span><span style="color: #008080;">108</span> <span style="background-color: #f5f5f5; color: #000000;">            }
</span><span style="color: #008080;">109</span> <span style="background-color: #f5f5f5; color: #000000;">        });
</span><span style="color: #008080;">110</span>         <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> app </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">new</span><span style="background-color: #f5f5f5; color: #000000;"> AppView();
</span><span style="color: #008080;">111</span> 
<span style="color: #008080;">112</span> <span style="background-color: #f5f5f5; color: #000000;">    })(jQuery);
</span><span style="color: #008080;">113</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">114</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">html</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<span class="cnblogs_code_collapse">带删除功能的通讯录</span></div>
<p><img src="46001310139896.png" alt=""></p>
<h2>阶段总结</h2>
<p>我们又简单的回顾了下backbone，这次学习后我和我的小伙伴表示都懂了。。。。</p>
<h1>整合requireJS</h1>
<p>先上个图：</p>
<p><img src="17716946751626.png" alt=""></p>
<p>尼玛，一下多出了好多文件：</p>
<h2>模型</h2>
<div class="cnblogs_code">
<pre>define(<span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
    </span><span style="color: #0000ff;">var</span> Contact =<span style="color: #000000;"> Backbone.Model.extend({
        initialize: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
            </span><span style="color: #0000ff;">this</span>.bind("error", <span style="color: #0000ff;">function</span><span style="color: #000000;"> (model, error) {
                alert(error);
            });
        },
        validate: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> (attr) {
            </span><span style="color: #0000ff;">if</span> (attr.name.length == ''<span style="color: #000000;">) {
                </span><span style="color: #0000ff;">return</span> '姓名格式错误'<span style="color: #000000;">;
            }
        }
    });
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> Contact;
});</span></pre>
</div>
<h2>集合</h2>
<div class="cnblogs_code">
<pre>define(['model/contact'], <span style="color: #0000ff;">function</span><span style="color: #000000;"> (Contact) {
    </span><span style="color: #0000ff;">var</span> ContactList =<span style="color: #000000;"> Backbone.Collection.extend({
        model: Contact,
        localStorage: </span><span style="color: #0000ff;">new</span> Store('contacts') <span style="color: #008000;">//</span><span style="color: #008000;">所有信息保存至contacts空间下，注意此次用到了本地存储的东西</span>
<span style="color: #000000;">
    });
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> ContactList;
});</span></pre>
</div>
<h2>contact视图</h2>
<div class="cnblogs_code">
<pre>define(<span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
    </span><span style="color: #0000ff;">var</span> ContactView =<span style="color: #000000;"> Backbone.View.extend({
        tagName: </span>'li'<span style="color: #000000;">,
        template: _.template(</span>'&lt;div&gt;&lt;%= name %&gt;：&lt;%= phone %&gt;&lt;a href="javascript:;" class="delete"&gt;[删除]&lt;/a&gt;&lt;/div&gt;'<span style="color: #000000;">),
        events: {
            </span>'click .delete': 'destroy'<span style="color: #000000;">
        },
        initialize: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
            _.bindAll(</span><span style="color: #0000ff;">this</span>, 'render', 'remove'<span style="color: #000000;">);
            </span><span style="color: #0000ff;">this</span>.model.bind('change', <span style="color: #0000ff;">this</span><span style="color: #000000;">.render);
            </span><span style="color: #0000ff;">this</span>.model.bind('destroy', <span style="color: #0000ff;">this</span><span style="color: #000000;">.remove);
        },
        render: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
            </span><span style="color: #0000ff;">var</span> html = <span style="color: #0000ff;">this</span>.template(<span style="color: #0000ff;">this</span><span style="color: #000000;">.model.toJSON());
            </span><span style="color: #008000;">//</span><span style="color: #008000;">this.el是生成的空div</span>
            $(<span style="color: #0000ff;">this</span><span style="color: #000000;">.el).html(html);
            </span><span style="color: #008000;">//</span><span style="color: #008000;">返回了当前视图</span>
            <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">this</span><span style="color: #000000;">;
        },
        destroy: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
            </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.model.destroy();
        },
        remove: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
            $(</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.el).remove();

        }
    });
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> ContactView;
});</span></pre>
</div>
<h2>全局视图</h2>
<div class="cnblogs_code">
<pre>define(['collection/contact', 'view/contact'], <span style="color: #0000ff;">function</span><span style="color: #000000;"> (contact, ContactView) {
    window.list </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> contact();
    </span><span style="color: #0000ff;">var</span> AppView =<span style="color: #000000;"> Backbone.View.extend({
        el: $(</span>'body'<span style="color: #000000;">),
        events: {
            </span>'click #add': 'save'<span style="color: #000000;">
        },
        initialize: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
            </span><span style="color: #0000ff;">this</span>.name = <span style="color: #0000ff;">this</span>.$('#name'<span style="color: #000000;">);
            </span><span style="color: #0000ff;">this</span>.phone = <span style="color: #0000ff;">this</span>.$('#phone'<span style="color: #000000;">);
            </span><span style="color: #0000ff;">this</span>.list = <span style="color: #0000ff;">this</span>.$('#contact-list'<span style="color: #000000;">);

            _.bindAll(</span><span style="color: #0000ff;">this</span>, 'render', 'add', 'loadList', 'save'<span style="color: #000000;">);
            </span><span style="color: #008000;">//</span><span style="color: #008000;">为集合绑定事件</span>
            list.bind('add', <span style="color: #0000ff;">this</span><span style="color: #000000;">.add);
            </span><span style="color: #008000;">//</span><span style="color: #008000;">添加修改时触发</span>
            list.bind('refresh', <span style="color: #0000ff;">this</span><span style="color: #000000;">.loadList);
            list.fetch();
        },
        </span><span style="color: #008000;">//</span><span style="color: #008000;">添加项目</span>
        add: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (model) {
            </span><span style="color: #0000ff;">var</span> view = <span style="color: #0000ff;">new</span><span style="color: #000000;"> ContactView({ model: model });
            </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.list.append(view.render().el);
            </span><span style="color: #008000;">//</span><span style="color: #008000;">                view.model.save({ name: model.name, phone: model.phone });</span>
            <span style="color: #0000ff;">var</span> s = ''<span style="color: #000000;">;
        },
        loadList: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
            list.each(</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.add);
        },
        save: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
            </span><span style="color: #0000ff;">var</span> name = <span style="color: #0000ff;">this</span><span style="color: #000000;">.name.val();
            </span><span style="color: #0000ff;">var</span> phone = <span style="color: #0000ff;">this</span><span style="color: #000000;">.phone.val();
            list.create({ name: name, phone: phone });
            </span><span style="color: #0000ff;">this</span>.name.val(''<span style="color: #000000;">);
            </span><span style="color: #0000ff;">this</span>.phone.val(''<span style="color: #000000;">);
        }
    });
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> AppView;
});</span></pre>
</div>
<h2>main函数</h2>
<div class="cnblogs_code">
<pre><span style="color: #000000;">require.config({
    paths: {
        jquery: </span>'js/jquery'<span style="color: #000000;">,
        underscore: </span>'js/underscore'<span style="color: #000000;">,
        backbone: </span>'js/backbone'<span style="color: #000000;">,
        bl: </span>'js/backbone.localStorage'<span style="color: #000000;">

    }
});

require([</span>'jquery', 'underscore', 'backbone', 'bl', 'model/contact', 'collection/contact', 'view/contact', 'view/app'<span style="color: #000000;">], 
</span><span style="color: #0000ff;">function</span><span style="color: #000000;"> ($, _, b, bl, model, collection, view, app) {
    </span><span style="color: #0000ff;">var</span> app = <span style="color: #0000ff;">new</span><span style="color: #000000;"> app();
});</span></pre>
</div>
<h2>HTML页面</h2>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">html </span><span style="color: #ff0000;">xmlns</span><span style="color: #0000ff;">="http://www.w3.org/1999/xhtml"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="contactapp"</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">header</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">h1</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;">
                通讯录</span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">h1</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">header</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">section </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="main"</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">ul </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="contact-list"</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">ul</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">section</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="create"</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">label</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;">
                姓名：</span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="text"</span><span style="color: #ff0000;"> id</span><span style="color: #0000ff;">="name"</span> <span style="color: #0000ff;">/&gt;&lt;/</span><span style="color: #800000;">label</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">label</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;">
                电话：</span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="text"</span><span style="color: #ff0000;"> id</span><span style="color: #0000ff;">="phone"</span> <span style="color: #0000ff;">/&gt;&lt;/</span><span style="color: #800000;">label</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="button"</span><span style="color: #ff0000;"> value</span><span style="color: #0000ff;">="保存"</span><span style="color: #ff0000;"> id</span><span style="color: #0000ff;">="add"</span> <span style="color: #0000ff;">/&gt;</span>
        <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="js/require.js"</span><span style="color: #ff0000;"> data-main</span><span style="color: #0000ff;">="main"</span><span style="color: #ff0000;"> type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">html</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p>于是，我们功能完成了：</p>
<p><img src="38782617512120.png" alt=""></p>
<h1>结语</h1>
<p>我和我的小伙伴说，尼玛终于搞完了。。。。。。</p>
                </div>

                <div class='span3 sidebar'>
                    <h2>导航栏</h2>
                    <ul class="nav nav-tabs nav-stacked">
                             				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/Fiddlerznqddsq/index.html">Fiddler真乃前端大杀器！！！</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/Requirejs/index.html">Requirejs</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/RequireJSyBackbonejdzh/index.html">RequireJS与Backbone简单整合</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/RequireJSxxbj/index.html">RequireJS学习笔记</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/Webqdyhctxdpzyyqdgsgpng/index.html">Web前端优化初探，小弟抛砖引玉，期待高手共破难关！</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/Webqdlqjrctxsqwpzyyqdgsgpng/index.html">Web前端浏览器兼容初探，小生浅文抛砖引玉，期待高手攻破难关！</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/jqueryfdataListxnyhmbybysxtgxn10bys/index.html">【jquery仿dataList——性能优化】模板预编译思想提高性能10倍以上！！！</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/jqueryfdataListyyzmfigoogledzhtdpxzdhfp/index.html">【jquery仿dataList】应用之——模仿igoogle【定制化、拖动排序，最大化、分屏】</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/jqueryfdatalistdygwtqzszmxxsjlkzDIVdjjbf/index.html">【jquery仿datalist的一个问题，求助】——设置每行显示几列，块状DIV的解决办法</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/jquerymfnetkjcbGridViewmxsxjqjdyy/index.html">【jquery模仿net控件】初步GridView模型实现，及其简单应用</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/jquerymfnetkjjdfykj10fsgridviewsycs/index.html">【jquery模仿net控件】简单分页控件10，附上gridview使用测试</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/jquerymfnetkjjdddatalistkjgxjqjdyy/index.html">【jquery模仿net控件】简单的datalist控件更新，及其简单应用</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/jquerymfnetkjjdddropdownlistydatalist/index.html">【jquery模仿net控件】简单的dropdownlist与datalist</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/jquerybnetkjdropdownlistfymhydjzdzzpz/index.html">【jquery版net控件—dropdownlist】附源码，欢迎大家指点、指正、拍砖！！！</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/positionykyhfzddccyslsbdws/index.html">【position也可以很复杂】当弹出层遇上了鼠标定位（上）</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/positionykyhfzddccyslsbdwx/index.html">【position也可以很复杂】当弹出层遇上了鼠标定位（下）</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/SEOzmlwljnmtsbwmlyqkkSEOb/index.html">【SEO】周末了，为了纪念明天上班，我们来一起看看SEO吧</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/webqdyhqdwyhyrzrz/index.html">【web前端优化】前端无优化，庸人自扰之！</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/webqdyhzreflowjsymdhl/index.html">【web前端优化之reflow】减少页面的回流</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/webqdyhztpycjzctzwbsxwbk/index.html">【web前端优化之图片延迟加载初探】中午不睡，下午崩溃</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/webqdyhztpmhdqxkwQQkjrhxsxp/index.html">【web前端优化之图片模糊到清晰】看我QQ空间如何显示相片</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/webqdpxzqhddphsywmsxdDatalistsmwtb/index.html">【web前端培训之前后端的配合（上）】以我们熟悉的Datalist说明问题吧</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/webqdpxzqhddphzjxzrdgs/index.html">【web前端培训之前后端的配合（中）】继续昨日的故事</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/dyyygybkydbfgqym/index.html">【单页应用】关于博客园的补发（高清有码）。。。</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/xtsstringifysBUGlocalstoragesxxmSafarialertksfycjzym10pxbp/index.html">【小贴士】【stringify神BUG】【localstorage失效】【消灭Safarialert框】【是否延迟加载】【页面10px白屏】</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/dalhdmsthhdsdmstjsh/index.html">【答阿里寒冬面试题】呵呵，大神的面试题就是好！</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/ycsjmstdldgwxxdgjxxdff/index.html">一次上机面试题带来的感悟【学习的感觉、学习的方法】</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/ydmstdldqdyhsxxxdp/index.html">一道面试题带来的前端优化——实现星星点评</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/zysyzjjhfzwebqdbfxlgxmndjjfa/index.html">只言碎语总结，今后发展web前端，并分享两个项目难点解决方案。</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/gwjlytbllbnwmljxwwdbdyzb/index.html">各位加了一天班累了吧？那我们来继续未完的表单验证吧</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/gwzmwlytllbwmyqlzldmstbjstbdy/index.html">各位周末玩了一天累了吧，我们一起来做两道面试题吧（据说淘宝的哟）！</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/jyjQuerydxlcdcjzwsy/index.html">基于jQuery的下拉菜单插件，诸位上眼！！！</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/jyjQuerydxlcdcd02zwsy/index.html">基于jQuery的下拉菜单菜单【02】，诸位上眼！！！</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/gzzpddyxdxdccktfybwjsc/index.html">工作中碰到的一些东西【弹出窗口】【拖放】【异步文件上传】</a></li>
    				          				<li><a href="http://songboriceboy.github.io/xxoo/html/Webqd/gzlygxqgwydllbnwmyqlbdyzyfb/index.html">工作了一个星期各位一定累了吧，那我们一起来表单验证一番吧！</a></li>
    				                                         
                    </ul>
                </div>
            </div>

        </div>
    </body>
</html>